2025-05-18 03:18:31.531  INFO [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : Starting OrderServiceApplication v0.0.1-SNAPSHOT using Java 17.0.15 with PID 1 (/app/OrderService.jar started by root in /app)
2025-05-18 03:18:31.625 DEBUG [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : Running with Spring Boot v3.4.3, Spring v6.2.3
2025-05-18 03:18:31.631  INFO [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : No active profile set, falling back to 1 default profile: "default"
2025-05-18 03:18:31.893  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Fetching config from server at : http://configserver:8888
2025-05-18 03:18:31.896  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Located environment: name=application, profiles=[default], label=null, version=1acc8d8659fd96ed52844c8881c260bdb5135241, state=
2025-05-18 03:18:31.899  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Fetching config from server at : http://configserver:8888
2025-05-18 03:18:31.902  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Located environment: name=OrderService, profiles=[default], label=null, version=1acc8d8659fd96ed52844c8881c260bdb5135241, state=
2025-05-18 03:18:40.841  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-18 03:18:40.851  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-18 03:18:41.759  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 850 ms. Found 2 JPA repository interfaces.
2025-05-18 03:18:41.844  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-18 03:18:41.851  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-18 03:18:41.941  INFO [traceId=, spanId=] 1 --- [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface iuh.fit.se.orderservice.repository.OrderDetailRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-05-18 03:18:41.959  INFO [traceId=, spanId=] 1 --- [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface iuh.fit.se.orderservice.repository.OrderRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-05-18 03:18:41.962  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 39 ms. Found 0 Redis repository interfaces.
2025-05-18 03:18:44.162  INFO [traceId=, spanId=] 1 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=f9b4fb59-e3a5-3945-a671-7885d95e7545
2025-05-18 03:18:47.811  INFO [traceId=, spanId=] 1 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 9003 (http)
2025-05-18 03:18:47.868  INFO [traceId=, spanId=] 1 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-18 03:18:47.870  INFO [traceId=, spanId=] 1 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.36]
2025-05-18 03:18:48.000  INFO [traceId=, spanId=] 1 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-18 03:18:48.003  INFO [traceId=, spanId=] 1 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 16084 ms
2025-05-18 03:18:51.249  INFO [traceId=, spanId=] 1 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-18 03:18:51.577  INFO [traceId=, spanId=] 1 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.8.Final
2025-05-18 03:18:51.790  INFO [traceId=, spanId=] 1 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-18 03:18:53.327  INFO [traceId=, spanId=] 1 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-18 03:18:53.534  INFO [traceId=, spanId=] 1 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-18 03:18:54.275  INFO [traceId=, spanId=] 1 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection ConnectionID:1 ClientConnectionId: 525e9784-de68-4ed8-8693-a8958f784698
2025-05-18 03:18:54.288  INFO [traceId=, spanId=] 1 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-18 03:18:54.505  WARN [traceId=, spanId=] 1 --- [main] org.hibernate.orm.deprecation            : HHH90000025: SQLServerDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-18 03:18:54.626  INFO [traceId=, spanId=] 1 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-18 03:18:59.972  INFO [traceId=, spanId=] 1 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-18 03:19:01.618  INFO [traceId=, spanId=] 1 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-18 03:19:04.509  WARN [traceId=, spanId=] 1 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-18 03:19:05.532  INFO [traceId=, spanId=] 1 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'InventoryService' URL not provided. Will try picking an instance via load-balancing.
2025-05-18 03:19:06.733  INFO [traceId=, spanId=] 1 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'UserService' URL not provided. Will try picking an instance via load-balancing.
2025-05-18 03:19:16.082  INFO [traceId=, spanId=] 1 --- [main] c.r.stream.impl.StreamEnvironment        : Connecting to localhost with guest user, assuming development environment
2025-05-18 03:19:16.084  INFO [traceId=, spanId=] 1 --- [main] c.r.stream.impl.StreamEnvironment        : Using address resolver to always connect to localhost
2025-05-18 03:19:19.505  INFO [traceId=, spanId=] 1 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2025-05-18 03:19:19.798  WARN [traceId=, spanId=] 1 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-05-18 03:19:19.898  INFO [traceId=, spanId=] 1 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoints beneath base path '/actuator'
2025-05-18 03:19:20.298  INFO [traceId=, spanId=] 1 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2025-05-18 03:19:20.389  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2025-05-18 03:19:20.403  INFO [traceId=, spanId=] 1 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 03:19:20.435  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2025-05-18 03:19:20.437  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2025-05-18 03:19:20.439  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2025-05-18 03:19:20.442  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2025-05-18 03:19:20.443  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2025-05-18 03:19:20.445  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2025-05-18 03:19:20.447  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2025-05-18 03:19:20.999  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2025-05-18 03:19:21.008  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2025-05-18 03:19:21.019  INFO [traceId=, spanId=] 1 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2025-05-18 03:19:21.026  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1747538361025 with initial instances count: 3
2025-05-18 03:19:21.052  INFO [traceId=, spanId=] 1 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application ORDERSERVICE with eureka with status UP
2025-05-18 03:19:21.055  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1747538361055, current=UP, previous=STARTING]
2025-05-18 03:19:21.062  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/2ca5021921dd:OrderService:9003: registering service...
2025-05-18 03:19:21.113  INFO [traceId=, spanId=] 1 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 9003 (http) with context path '/'
2025-05-18 03:19:21.116  INFO [traceId=, spanId=] 1 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9003
2025-05-18 03:19:21.130  INFO [traceId=, spanId=] 1 --- [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [rabbitmq:5672]
2025-05-18 03:19:21.182  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/2ca5021921dd:OrderService:9003 - registration status: 204
2025-05-18 03:19:21.329  INFO [traceId=, spanId=] 1 --- [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#e06d647:0/SimpleConnection@679a6394 [delegate=amqp://guest@172.19.0.2:5672/, localPort=57404]
2025-05-18 03:19:21.746  INFO [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : Started OrderServiceApplication in 66.501 seconds (process running for 69.613)
2025-05-18 03:19:22.017  WARN [traceId=, spanId=] 1 --- [AsyncReporter{ZipkinRestTemplateSender{http://localhost:9411/api/v2/spans}}] z.r.i.AsyncReporter$BoundedAsyncReporter : Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-05-18 03:19:22.020  WARN [traceId=, spanId=] 1 --- [AsyncReporter{ZipkinRestTemplateSender{http://localhost:9411/api/v2/spans}}] z.r.i.AsyncReporter$BoundedAsyncReporter : Dropped 2 spans due to ResourceAccessException(I/O error on POST request for "http://localhost:9411/api/v2/spans": Connect to http://localhost:9411 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused)

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:9411/api/v2/spans": Connect to http://localhost:9411 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:925)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:905)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:840)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:701)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinRestTemplateSender.postSpans(ZipkinRestTemplateSender.java:50)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.apache.hc.client5.http.HttpHostConnectException: Connect to http://localhost:9411 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.apache.hc.client5.http.impl.io.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:216)
	at org.apache.hc.client5.http.impl.io.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:490)
	at org.apache.hc.client5.http.impl.classic.InternalExecRuntime.connectEndpoint(InternalExecRuntime.java:164)
	at org.apache.hc.client5.http.impl.classic.InternalExecRuntime.connectEndpoint(InternalExecRuntime.java:174)
	at org.apache.hc.client5.http.impl.classic.ConnectExec.execute(ConnectExec.java:144)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.ProtocolExec.execute(ProtocolExec.java:192)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.ContentCompressionExec.execute(ContentCompressionExec.java:150)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.HttpRequestRetryExec.execute(HttpRequestRetryExec.java:113)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.RedirectExec.execute(RedirectExec.java:110)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.InternalHttpClient.doExecute(InternalHttpClient.java:174)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:87)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:55)
	at org.apache.hc.client5.http.classic.HttpClient.executeOpen(HttpClient.java:183)
	at org.springframework.http.client.HttpComponentsClientHttpRequest.executeInternal(HttpComponentsClientHttpRequest.java:99)
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71)
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:899)
	... 9 common frames omitted

2025-05-18 03:19:42.521  INFO [traceId=, spanId=] 1 --- [http-nio-9003-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-18 03:19:42.524  INFO [traceId=, spanId=] 1 --- [http-nio-9003-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-18 03:19:42.535  INFO [traceId=, spanId=] 1 --- [http-nio-9003-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 8 ms
2025-05-18 03:23:01.351  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application ORDERSERVICE with eureka with status DOWN
2025-05-18 03:23:01.354  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1747538581354, current=DOWN, previous=UP]
2025-05-18 03:23:01.356  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/2ca5021921dd:OrderService:9003: registering service...
2025-05-18 03:23:01.382  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/2ca5021921dd:OrderService:9003 - registration status: 204
2025-05-18 03:23:01.385  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
2025-05-18 03:23:01.395  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
2025-05-18 03:23:01.711  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
2025-05-18 03:23:01.739  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
2025-05-18 03:23:01.743  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-18 03:23:01.749  INFO [traceId=, spanId=] 1 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-18 03:23:02.869  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-18 03:23:02.874  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-18 03:23:02.879  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-18 03:23:03.097  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2025-05-18 03:23:06.099  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2025-05-18 03:23:06.113  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/2ca5021921dd:OrderService:9003 - deregister  status: 200
2025-05-18 03:23:06.115  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2025-05-18 03:25:50.432  INFO [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : Starting OrderServiceApplication v0.0.1-SNAPSHOT using Java 17.0.15 with PID 1 (/app/OrderService.jar started by root in /app)
2025-05-18 03:25:50.461 DEBUG [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : Running with Spring Boot v3.4.3, Spring v6.2.3
2025-05-18 03:25:50.465  INFO [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : No active profile set, falling back to 1 default profile: "default"
2025-05-18 03:25:50.630  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Fetching config from server at : http://configserver:8888
2025-05-18 03:25:50.633  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Located environment: name=application, profiles=[default], label=null, version=1acc8d8659fd96ed52844c8881c260bdb5135241, state=
2025-05-18 03:25:50.636  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Fetching config from server at : http://configserver:8888
2025-05-18 03:25:50.638  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Located environment: name=OrderService, profiles=[default], label=null, version=1acc8d8659fd96ed52844c8881c260bdb5135241, state=
2025-05-18 03:26:00.817  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-18 03:26:00.839  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-18 03:26:02.054  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 1105 ms. Found 2 JPA repository interfaces.
2025-05-18 03:26:02.223  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-18 03:26:02.237  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-18 03:26:02.455  INFO [traceId=, spanId=] 1 --- [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface iuh.fit.se.orderservice.repository.OrderDetailRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-05-18 03:26:02.465  INFO [traceId=, spanId=] 1 --- [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface iuh.fit.se.orderservice.repository.OrderRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-05-18 03:26:02.473  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 89 ms. Found 0 Redis repository interfaces.
2025-05-18 03:26:05.621  INFO [traceId=, spanId=] 1 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=f9b4fb59-e3a5-3945-a671-7885d95e7545
2025-05-18 03:26:09.671  INFO [traceId=, spanId=] 1 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 9003 (http)
2025-05-18 03:26:09.748  INFO [traceId=, spanId=] 1 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-18 03:26:09.755  INFO [traceId=, spanId=] 1 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.36]
2025-05-18 03:26:09.991  INFO [traceId=, spanId=] 1 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-18 03:26:09.996  INFO [traceId=, spanId=] 1 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 19344 ms
2025-05-18 03:26:16.703  INFO [traceId=, spanId=] 1 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-18 03:26:17.207  INFO [traceId=, spanId=] 1 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.8.Final
2025-05-18 03:26:17.434  INFO [traceId=, spanId=] 1 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-18 03:26:19.333  INFO [traceId=, spanId=] 1 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-18 03:26:19.503  INFO [traceId=, spanId=] 1 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-18 03:26:20.190  INFO [traceId=, spanId=] 1 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection ConnectionID:1 ClientConnectionId: 5d4b709f-8bef-42aa-acda-5314f592161b
2025-05-18 03:26:20.200  INFO [traceId=, spanId=] 1 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-18 03:26:20.392  WARN [traceId=, spanId=] 1 --- [main] org.hibernate.orm.deprecation            : HHH90000025: SQLServerDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-18 03:26:20.484  INFO [traceId=, spanId=] 1 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-18 03:26:25.038  INFO [traceId=, spanId=] 1 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-18 03:26:26.198  INFO [traceId=, spanId=] 1 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-18 03:26:29.070  WARN [traceId=, spanId=] 1 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-18 03:26:30.646  INFO [traceId=, spanId=] 1 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'InventoryService' URL not provided. Will try picking an instance via load-balancing.
2025-05-18 03:26:31.751  INFO [traceId=, spanId=] 1 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'UserService' URL not provided. Will try picking an instance via load-balancing.
2025-05-18 03:26:40.716  INFO [traceId=, spanId=] 1 --- [main] c.r.stream.impl.StreamEnvironment        : Connecting to localhost with guest user, assuming development environment
2025-05-18 03:26:40.718  INFO [traceId=, spanId=] 1 --- [main] c.r.stream.impl.StreamEnvironment        : Using address resolver to always connect to localhost
2025-05-18 03:26:43.821  INFO [traceId=, spanId=] 1 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2025-05-18 03:26:44.121  WARN [traceId=, spanId=] 1 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-05-18 03:26:44.224  INFO [traceId=, spanId=] 1 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoints beneath base path '/actuator'
2025-05-18 03:26:44.544  INFO [traceId=, spanId=] 1 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2025-05-18 03:26:44.630  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2025-05-18 03:26:44.647  INFO [traceId=, spanId=] 1 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 03:26:44.682  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2025-05-18 03:26:44.684  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2025-05-18 03:26:44.685  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2025-05-18 03:26:44.687  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2025-05-18 03:26:44.688  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2025-05-18 03:26:44.690  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2025-05-18 03:26:44.692  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2025-05-18 03:26:45.217  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2025-05-18 03:26:45.225  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2025-05-18 03:26:45.234  INFO [traceId=, spanId=] 1 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2025-05-18 03:26:45.239  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1747538805239 with initial instances count: 3
2025-05-18 03:26:45.260  INFO [traceId=, spanId=] 1 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application ORDERSERVICE with eureka with status UP
2025-05-18 03:26:45.263  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1747538805263, current=UP, previous=STARTING]
2025-05-18 03:26:45.270  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/c968a3e6528d:OrderService:9003: registering service...
2025-05-18 03:26:45.326  INFO [traceId=, spanId=] 1 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 9003 (http) with context path '/'
2025-05-18 03:26:45.330  INFO [traceId=, spanId=] 1 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9003
2025-05-18 03:26:45.345  INFO [traceId=, spanId=] 1 --- [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [rabbitmq:5672]
2025-05-18 03:26:45.397  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/c968a3e6528d:OrderService:9003 - registration status: 204
2025-05-18 03:26:45.556  INFO [traceId=, spanId=] 1 --- [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#1a7e6989:0/SimpleConnection@7dff5404 [delegate=amqp://guest@172.19.0.4:5672/, localPort=41070]
2025-05-18 03:26:46.056  INFO [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : Started OrderServiceApplication in 66.878 seconds (process running for 71.653)
2025-05-18 03:26:46.232  WARN [traceId=, spanId=] 1 --- [AsyncReporter{ZipkinRestTemplateSender{http://localhost:9411/api/v2/spans}}] z.r.i.AsyncReporter$BoundedAsyncReporter : Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-05-18 03:26:46.235  WARN [traceId=, spanId=] 1 --- [AsyncReporter{ZipkinRestTemplateSender{http://localhost:9411/api/v2/spans}}] z.r.i.AsyncReporter$BoundedAsyncReporter : Dropped 2 spans due to ResourceAccessException(I/O error on POST request for "http://localhost:9411/api/v2/spans": Connect to http://localhost:9411 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused)

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:9411/api/v2/spans": Connect to http://localhost:9411 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:925)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:905)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:840)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:701)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinRestTemplateSender.postSpans(ZipkinRestTemplateSender.java:50)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.apache.hc.client5.http.HttpHostConnectException: Connect to http://localhost:9411 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.apache.hc.client5.http.impl.io.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:216)
	at org.apache.hc.client5.http.impl.io.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:490)
	at org.apache.hc.client5.http.impl.classic.InternalExecRuntime.connectEndpoint(InternalExecRuntime.java:164)
	at org.apache.hc.client5.http.impl.classic.InternalExecRuntime.connectEndpoint(InternalExecRuntime.java:174)
	at org.apache.hc.client5.http.impl.classic.ConnectExec.execute(ConnectExec.java:144)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.ProtocolExec.execute(ProtocolExec.java:192)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.ContentCompressionExec.execute(ContentCompressionExec.java:150)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.HttpRequestRetryExec.execute(HttpRequestRetryExec.java:113)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.RedirectExec.execute(RedirectExec.java:110)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.InternalHttpClient.doExecute(InternalHttpClient.java:174)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:87)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:55)
	at org.apache.hc.client5.http.classic.HttpClient.executeOpen(HttpClient.java:183)
	at org.springframework.http.client.HttpComponentsClientHttpRequest.executeInternal(HttpComponentsClientHttpRequest.java:99)
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71)
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:899)
	... 9 common frames omitted

2025-05-18 03:27:04.944  INFO [traceId=, spanId=] 1 --- [http-nio-9003-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-18 03:27:04.947  INFO [traceId=, spanId=] 1 --- [http-nio-9003-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-18 03:27:04.960  INFO [traceId=, spanId=] 1 --- [http-nio-9003-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 11 ms
2025-05-18 03:30:52.416  INFO [traceId=6829546c62c2b566762fe66138199b60, spanId=762fe66138199b60] 1 --- [http-nio-9003-exec-9] i.f.s.o.s.w.InventoryServiceWrapper      : 🔍 Checking stock for productVariantDetailId: 05e5a662-a70e-4b41-a3e8-89dc27c1ec13
2025-05-18 03:30:52.896  INFO [traceId=6829546c62c2b566762fe66138199b60, spanId=762fe66138199b60] 1 --- [http-nio-9003-exec-9] i.f.s.o.s.w.InventoryServiceWrapper      : 🔍 Checking stock for productVariantDetailId: 05464512-f580-426a-8800-bc7c38683c62
2025-05-18 03:30:52.913  INFO [traceId=6829546c62c2b566762fe66138199b60, spanId=762fe66138199b60] 1 --- [http-nio-9003-exec-9] i.f.s.o.service.impl.OrderServiceImpl    : OrderRequestV2(customerId=ba21e63f-c8cc-41c1-aa7c-bde769860887, systemUserId=null, address=79 Tân Thắng, paymentMethod=VNPAY, paymentStatus=WAITING, orderStatus=NEW, productDetailOrders=[OrderRequestV2.ProductDetailOrder(productVariantDetailId=05e5a662-a70e-4b41-a3e8-89dc27c1ec13, quantity=1, price=9090000.0), OrderRequestV2.ProductDetailOrder(productVariantDetailId=05464512-f580-426a-8800-bc7c38683c62, quantity=1, price=7490000.0)])
2025-05-18 03:30:53.349  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.f.s.o.service.impl.OrderServiceImpl    : Received payment response: PaymentStatusResponse(orderId=7fb9717f-00b5-4c28-985f-7c12d5510786, status=WAITING, paymentUrl=https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=1658000000&vnp_Command=pay&vnp_CreateDate=20250518103053&vnp_CurrCode=VND&vnp_ExpireDate=20250518104553&vnp_IpAddr=172.19.0.1&vnp_Locale=vn&vnp_OrderInfo=Order+payment+result%3A7fb9717f-00b5-4c28-985f-7c12d5510786&vnp_OrderType=other&vnp_ReturnUrl=http%3A%2F%2Flocalhost%3A8081%2Fpayment%2Fvn-pay-callback&vnp_TmnCode=2M388J6X&vnp_TxnRef=7fb9717f-00b5-4c28-985f-7c12d5510786&vnp_Version=2.1.0&vnp_SecureHash=702c486c1eb1a6a991b96d136d5ff3ff10e694e3ecbe65f9d8688980f0cdf7c7b18000d20e502469ca224d541d6d2182fb85686e42cc94ded24327d331c3bd41)
2025-05-18 03:30:53.354  INFO [traceId=6829546c62c2b566762fe66138199b60, spanId=762fe66138199b60] 1 --- [http-nio-9003-exec-9] i.f.s.o.s.w.CustomerServiceWrapper       : 🔍 Calling CustomerService for customerId: ba21e63f-c8cc-41c1-aa7c-bde769860887
2025-05-18 03:31:20.632  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] i.f.s.o.service.impl.OrderServiceImpl    : Received payment status for order: 7fb9717f-00b5-4c28-985f-7c12d5510786
2025-05-18 03:31:21.026  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] i.f.s.o.s.w.CustomerServiceWrapper       : 🔍 Calling CustomerService for customerId: ba21e63f-c8cc-41c1-aa7c-bde769860887
2025-05-18 03:31:21.063  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] i.f.s.o.service.impl.OrderServiceImpl    : Payment completed for order: 7fb9717f-00b5-4c28-985f-7c12d5510786
2025-05-18 03:31:21.122  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] i.f.s.o.service.impl.OrderServiceImpl    : Notification sent to ggducvu@gmail.com
2025-05-18 03:31:44.676  INFO [traceId=, spanId=] 1 --- [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 03:36:44.658  INFO [traceId=, spanId=] 1 --- [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 03:41:44.642  INFO [traceId=, spanId=] 1 --- [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 03:44:38.648  WARN [traceId=682957a61cfde7e3b39696ba1ee11448, spanId=b39696ba1ee11448] 1 --- [http-nio-9003-exec-8] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection ConnectionID:2 ClientConnectionId: 8344ae71-a1cc-4618-bf0d-8458a21b7e52 (The connection is closed.). Possibly consider using a shorter maxLifetime value.
2025-05-18 03:44:38.720  WARN [traceId=682957a61cfde7e3b39696ba1ee11448, spanId=b39696ba1ee11448] 1 --- [http-nio-9003-exec-8] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection ConnectionID:3 ClientConnectionId: ccdd31f8-2bcb-44fd-bede-715d8894a40c (The connection is closed.). Possibly consider using a shorter maxLifetime value.
2025-05-18 03:44:38.795  WARN [traceId=682957a61cfde7e3b39696ba1ee11448, spanId=b39696ba1ee11448] 1 --- [http-nio-9003-exec-8] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection ConnectionID:4 ClientConnectionId: e6d66125-9c14-409b-8904-821c872ed1b6 (The connection is closed.). Possibly consider using a shorter maxLifetime value.
2025-05-18 03:44:38.867  WARN [traceId=682957a61cfde7e3b39696ba1ee11448, spanId=b39696ba1ee11448] 1 --- [http-nio-9003-exec-8] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection ConnectionID:5 ClientConnectionId: 14a88bbb-c6e3-4093-891a-78bfe62d7a62 (The connection is closed.). Possibly consider using a shorter maxLifetime value.
2025-05-18 03:44:38.936  WARN [traceId=682957a61cfde7e3b39696ba1ee11448, spanId=b39696ba1ee11448] 1 --- [http-nio-9003-exec-8] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection ConnectionID:6 ClientConnectionId: 70204dfa-9d95-499b-8103-89dade42f5a1 (The connection is closed.). Possibly consider using a shorter maxLifetime value.
2025-05-18 03:44:38.998  WARN [traceId=682957a61cfde7e3b39696ba1ee11448, spanId=b39696ba1ee11448] 1 --- [http-nio-9003-exec-8] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection ConnectionID:7 ClientConnectionId: ceb6b5a0-c799-458b-a0c3-92bed433f00e (The connection is closed.). Possibly consider using a shorter maxLifetime value.
2025-05-18 03:44:39.068  WARN [traceId=682957a61cfde7e3b39696ba1ee11448, spanId=b39696ba1ee11448] 1 --- [http-nio-9003-exec-8] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection ConnectionID:8 ClientConnectionId: e8d41851-0cc2-4dd5-a9d5-efd3820ca96c (The connection is closed.). Possibly consider using a shorter maxLifetime value.
2025-05-18 03:44:39.127  WARN [traceId=682957a61cfde7e3b39696ba1ee11448, spanId=b39696ba1ee11448] 1 --- [http-nio-9003-exec-8] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection ConnectionID:9 ClientConnectionId: 5accf80e-4433-4a79-b319-d025d5d304f5 (The connection is closed.). Possibly consider using a shorter maxLifetime value.
2025-05-18 03:44:39.179  WARN [traceId=682957a61cfde7e3b39696ba1ee11448, spanId=b39696ba1ee11448] 1 --- [http-nio-9003-exec-8] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection ConnectionID:10 ClientConnectionId: 7a189972-49ee-41bb-83ea-1ff4c9f588b7 (The connection is closed.). Possibly consider using a shorter maxLifetime value.
2025-05-18 03:45:08.272  WARN [traceId=682957a61cfde7e3b39696ba1ee11448, spanId=b39696ba1ee11448] 1 --- [http-nio-9003-exec-8] o.s.b.a.jdbc.DataSourceHealthIndicator   : DataSource health check failed

org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:84)
	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:342)
	at org.springframework.boot.actuate.jdbc.DataSourceHealthIndicator.getProduct(DataSourceHealthIndicator.java:122)
	at org.springframework.boot.actuate.jdbc.DataSourceHealthIndicator.doDataSourceHealthCheck(DataSourceHealthIndicator.java:105)
	at org.springframework.boot.actuate.jdbc.DataSourceHealthIndicator.doHealthCheck(DataSourceHealthIndicator.java:100)
	at org.springframework.boot.actuate.health.AbstractHealthIndicator.health(AbstractHealthIndicator.java:82)
	at org.springframework.boot.actuate.health.HealthIndicator.getHealth(HealthIndicator.java:37)
	at org.springframework.boot.actuate.health.HealthEndpointWebExtension.getHealth(HealthEndpointWebExtension.java:94)
	at org.springframework.boot.actuate.health.HealthEndpointWebExtension.getHealth(HealthEndpointWebExtension.java:47)
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getLoggedHealth(HealthEndpointSupport.java:172)
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getContribution(HealthEndpointSupport.java:145)
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getAggregateContribution(HealthEndpointSupport.java:156)
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getContribution(HealthEndpointSupport.java:141)
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getHealth(HealthEndpointSupport.java:110)
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getHealth(HealthEndpointSupport.java:81)
	at org.springframework.boot.actuate.health.HealthEndpointWebExtension.health(HealthEndpointWebExtension.java:80)
	at org.springframework.boot.actuate.health.HealthEndpointWebExtension.health(HealthEndpointWebExtension.java:69)
	at jdk.internal.reflect.GeneratedMethodAccessor34.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:281)
	at org.springframework.boot.actuate.endpoint.invoke.reflect.ReflectiveOperationInvoker.invoke(ReflectiveOperationInvoker.java:74)
	at org.springframework.boot.actuate.endpoint.annotation.AbstractDiscoveredOperation.invoke(AbstractDiscoveredOperation.java:60)
	at org.springframework.boot.actuate.endpoint.web.servlet.AbstractWebMvcEndpointHandlerMapping$ServletWebOperationAdapter.handle(AbstractWebMvcEndpointHandlerMapping.java:327)
	at org.springframework.boot.actuate.endpoint.web.servlet.AbstractWebMvcEndpointHandlerMapping$OperationHandler.handle(AbstractWebMvcEndpointHandlerMapping.java:434)
	at jdk.internal.reflect.GeneratedMethodAccessor33.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.doHead(HttpServlet.java:211)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:587)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30005ms (total=0, active=0, idle=0, waiting=0)
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:686)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:179)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:144)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:127)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:160)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:118)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:81)
	... 78 common frames omitted
Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: Cannot open database "OrderDB" requested by the login. The login failed. ClientConnectionId:ece18173-b5e6-4702-8d68-f5ef574561d1
	at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:270)
	at com.microsoft.sqlserver.jdbc.TDSTokenHandler.onEOF(tdsparser.java:329)
	at com.microsoft.sqlserver.jdbc.TDSParser.parse(tdsparser.java:137)
	at com.microsoft.sqlserver.jdbc.TDSParser.parse(tdsparser.java:42)
	at com.microsoft.sqlserver.jdbc.SQLServerConnection.sendLogon(SQLServerConnection.java:6888)
	at com.microsoft.sqlserver.jdbc.SQLServerConnection.logon(SQLServerConnection.java:5434)
	at com.microsoft.sqlserver.jdbc.SQLServerConnection$LogonCommand.doExecute(SQLServerConnection.java:5366)
	at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:7745)
	at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:4391)
	at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLServerConnection.java:3828)
	at com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:3385)
	at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectInternal(SQLServerConnection.java:3194)
	at com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:1971)
	at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:1263)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:137)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:360)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:202)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:461)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:724)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:703)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	... 1 common frames omitted

2025-05-18 03:45:08.324  WARN [traceId=682957a61cfde7e3b39696ba1ee11448, spanId=b39696ba1ee11448] 1 --- [http-nio-9003-exec-8] o.s.b.a.health.HealthEndpointSupport     : Health contributor org.springframework.boot.actuate.jdbc.DataSourceHealthIndicator (db) took 30044ms to respond
2025-05-18 03:45:29.031  WARN [traceId=682957ce5dbef33a9695014de77e0f0c, spanId=9695014de77e0f0c] 1 --- [http-nio-9003-exec-9] o.s.b.a.health.HealthEndpointSupport     : Health contributor org.springframework.boot.actuate.jdbc.DataSourceHealthIndicator (db) took 10747ms to respond
2025-05-18 03:46:07.282  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application ORDERSERVICE with eureka with status DOWN
2025-05-18 03:46:07.286  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1747539967285, current=DOWN, previous=UP]
2025-05-18 03:46:07.288  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/c968a3e6528d:OrderService:9003: registering service...
2025-05-18 03:46:07.346  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/c968a3e6528d:OrderService:9003 - registration status: 204
2025-05-18 03:46:07.489  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
2025-05-18 03:46:07.495  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
2025-05-18 03:46:07.508  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
2025-05-18 03:46:08.243  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
2025-05-18 03:46:08.261  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-18 03:46:08.285  INFO [traceId=, spanId=] 1 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-18 03:46:09.605  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-18 03:46:09.662  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-18 03:46:09.671  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-18 03:46:10.635  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2025-05-18 03:46:13.637  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2025-05-18 03:46:13.656  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/c968a3e6528d:OrderService:9003 - deregister  status: 200
2025-05-18 03:46:13.660  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2025-05-18 03:59:25.850  INFO [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : Starting OrderServiceApplication v0.0.1-SNAPSHOT using Java 17.0.15 with PID 1 (/app/OrderService.jar started by root in /app)
2025-05-18 03:59:25.878 DEBUG [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : Running with Spring Boot v3.4.3, Spring v6.2.3
2025-05-18 03:59:25.882  INFO [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : No active profile set, falling back to 1 default profile: "default"
2025-05-18 03:59:26.062  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Fetching config from server at : http://configserver:8888
2025-05-18 03:59:26.064  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Located environment: name=application, profiles=[default], label=null, version=1acc8d8659fd96ed52844c8881c260bdb5135241, state=
2025-05-18 03:59:26.067  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Fetching config from server at : http://configserver:8888
2025-05-18 03:59:26.071  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Located environment: name=OrderService, profiles=[default], label=null, version=1acc8d8659fd96ed52844c8881c260bdb5135241, state=
2025-05-18 03:59:33.239  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-18 03:59:33.249  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-18 03:59:33.900  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 615 ms. Found 2 JPA repository interfaces.
2025-05-18 03:59:33.965  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-18 03:59:33.972  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-18 03:59:34.021  INFO [traceId=, spanId=] 1 --- [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface iuh.fit.se.orderservice.repository.OrderDetailRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-05-18 03:59:34.024  INFO [traceId=, spanId=] 1 --- [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface iuh.fit.se.orderservice.repository.OrderRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-05-18 03:59:34.027  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 19 ms. Found 0 Redis repository interfaces.
2025-05-18 03:59:35.980  INFO [traceId=, spanId=] 1 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=f9b4fb59-e3a5-3945-a671-7885d95e7545
2025-05-18 03:59:38.996  INFO [traceId=, spanId=] 1 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 9003 (http)
2025-05-18 03:59:39.032  INFO [traceId=, spanId=] 1 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-18 03:59:39.036  INFO [traceId=, spanId=] 1 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.36]
2025-05-18 03:59:39.156  INFO [traceId=, spanId=] 1 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-18 03:59:39.158  INFO [traceId=, spanId=] 1 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 13072 ms
2025-05-18 03:59:43.090  INFO [traceId=, spanId=] 1 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-18 03:59:43.332  INFO [traceId=, spanId=] 1 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.8.Final
2025-05-18 03:59:43.463  INFO [traceId=, spanId=] 1 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-18 03:59:44.568  INFO [traceId=, spanId=] 1 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-18 03:59:44.672  INFO [traceId=, spanId=] 1 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-18 03:59:45.161  INFO [traceId=, spanId=] 1 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection ConnectionID:1 ClientConnectionId: 85d32226-a249-43e0-a377-c0a8ecea3080
2025-05-18 03:59:45.170  INFO [traceId=, spanId=] 1 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-18 03:59:45.463  WARN [traceId=, spanId=] 1 --- [main] org.hibernate.orm.deprecation            : HHH90000025: SQLServerDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-18 03:59:45.547  INFO [traceId=, spanId=] 1 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-18 03:59:49.551  INFO [traceId=, spanId=] 1 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-18 03:59:52.108  INFO [traceId=, spanId=] 1 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-18 03:59:55.598  WARN [traceId=, spanId=] 1 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-18 03:59:56.737  INFO [traceId=, spanId=] 1 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'InventoryService' URL not provided. Will try picking an instance via load-balancing.
2025-05-18 03:59:58.112  INFO [traceId=, spanId=] 1 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'UserService' URL not provided. Will try picking an instance via load-balancing.
2025-05-18 04:00:08.350  INFO [traceId=, spanId=] 1 --- [main] c.r.stream.impl.StreamEnvironment        : Connecting to localhost with guest user, assuming development environment
2025-05-18 04:00:08.353  INFO [traceId=, spanId=] 1 --- [main] c.r.stream.impl.StreamEnvironment        : Using address resolver to always connect to localhost
2025-05-18 04:00:12.185  INFO [traceId=, spanId=] 1 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2025-05-18 04:00:12.562  WARN [traceId=, spanId=] 1 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-05-18 04:00:12.672  INFO [traceId=, spanId=] 1 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoints beneath base path '/actuator'
2025-05-18 04:00:13.165  INFO [traceId=, spanId=] 1 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2025-05-18 04:00:13.276  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2025-05-18 04:00:13.291  INFO [traceId=, spanId=] 1 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 04:00:13.325  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2025-05-18 04:00:13.327  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2025-05-18 04:00:13.329  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2025-05-18 04:00:13.330  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2025-05-18 04:00:13.332  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2025-05-18 04:00:13.334  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2025-05-18 04:00:13.336  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2025-05-18 04:00:13.945  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2025-05-18 04:00:13.952  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2025-05-18 04:00:13.960  INFO [traceId=, spanId=] 1 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2025-05-18 04:00:13.967  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1747540813965 with initial instances count: 3
2025-05-18 04:00:13.998  INFO [traceId=, spanId=] 1 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application ORDERSERVICE with eureka with status UP
2025-05-18 04:00:14.001  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1747540814001, current=UP, previous=STARTING]
2025-05-18 04:00:14.015  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/9d8a0abc4ede:OrderService:9003: registering service...
2025-05-18 04:00:14.125  INFO [traceId=, spanId=] 1 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 9003 (http) with context path '/'
2025-05-18 04:00:14.136  INFO [traceId=, spanId=] 1 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9003
2025-05-18 04:00:14.158  INFO [traceId=, spanId=] 1 --- [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [rabbitmq:5672]
2025-05-18 04:00:14.211  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/9d8a0abc4ede:OrderService:9003 - registration status: 204
2025-05-18 04:00:14.392  INFO [traceId=, spanId=] 1 --- [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#5c2fd20c:0/SimpleConnection@26843c72 [delegate=amqp://guest@172.19.0.5:5672/, localPort=55848]
2025-05-18 04:00:14.833  INFO [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : Started OrderServiceApplication in 62.758 seconds (process running for 65.314)
2025-05-18 04:00:14.968  WARN [traceId=, spanId=] 1 --- [AsyncReporter{ZipkinRestTemplateSender{http://localhost:9411/api/v2/spans}}] z.r.i.AsyncReporter$BoundedAsyncReporter : Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-05-18 04:00:14.972  WARN [traceId=, spanId=] 1 --- [AsyncReporter{ZipkinRestTemplateSender{http://localhost:9411/api/v2/spans}}] z.r.i.AsyncReporter$BoundedAsyncReporter : Dropped 2 spans due to ResourceAccessException(I/O error on POST request for "http://localhost:9411/api/v2/spans": Connect to http://localhost:9411 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused)

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:9411/api/v2/spans": Connect to http://localhost:9411 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:925)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:905)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:840)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:701)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinRestTemplateSender.postSpans(ZipkinRestTemplateSender.java:50)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.apache.hc.client5.http.HttpHostConnectException: Connect to http://localhost:9411 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.apache.hc.client5.http.impl.io.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:216)
	at org.apache.hc.client5.http.impl.io.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:490)
	at org.apache.hc.client5.http.impl.classic.InternalExecRuntime.connectEndpoint(InternalExecRuntime.java:164)
	at org.apache.hc.client5.http.impl.classic.InternalExecRuntime.connectEndpoint(InternalExecRuntime.java:174)
	at org.apache.hc.client5.http.impl.classic.ConnectExec.execute(ConnectExec.java:144)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.ProtocolExec.execute(ProtocolExec.java:192)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.ContentCompressionExec.execute(ContentCompressionExec.java:150)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.HttpRequestRetryExec.execute(HttpRequestRetryExec.java:113)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.RedirectExec.execute(RedirectExec.java:110)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.InternalHttpClient.doExecute(InternalHttpClient.java:174)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:87)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:55)
	at org.apache.hc.client5.http.classic.HttpClient.executeOpen(HttpClient.java:183)
	at org.springframework.http.client.HttpComponentsClientHttpRequest.executeInternal(HttpComponentsClientHttpRequest.java:99)
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71)
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:899)
	... 9 common frames omitted

2025-05-18 04:00:39.886  INFO [traceId=, spanId=] 1 --- [http-nio-9003-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-18 04:00:39.888  INFO [traceId=, spanId=] 1 --- [http-nio-9003-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-18 04:00:39.894  INFO [traceId=, spanId=] 1 --- [http-nio-9003-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2025-05-18 04:05:13.325  INFO [traceId=, spanId=] 1 --- [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 04:10:13.311  INFO [traceId=, spanId=] 1 --- [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 04:15:13.300  INFO [traceId=, spanId=] 1 --- [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 04:20:13.302  INFO [traceId=, spanId=] 1 --- [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 04:25:13.291  INFO [traceId=, spanId=] 1 --- [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 04:30:13.280  INFO [traceId=, spanId=] 1 --- [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 04:35:13.268  INFO [traceId=, spanId=] 1 --- [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 04:40:13.256  INFO [traceId=, spanId=] 1 --- [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 04:43:42.292  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application ORDERSERVICE with eureka with status DOWN
2025-05-18 04:43:42.304  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1747543422304, current=DOWN, previous=UP]
2025-05-18 04:43:42.312  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/9d8a0abc4ede:OrderService:9003: registering service...
2025-05-18 04:43:42.509  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/9d8a0abc4ede:OrderService:9003 - registration status: 204
2025-05-18 04:43:43.082  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
2025-05-18 04:43:43.090  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
2025-05-18 04:43:43.120  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
2025-05-18 04:43:43.131  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
2025-05-18 04:43:43.193  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-18 04:43:43.271  INFO [traceId=, spanId=] 1 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-18 04:43:45.740  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-18 04:43:45.872  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-18 04:43:45.898  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-18 04:43:46.910  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2025-05-18 04:43:49.914  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2025-05-18 04:43:49.953  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/9d8a0abc4ede:OrderService:9003 - deregister  status: 200
2025-05-18 04:43:49.961  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2025-05-18 05:17:28.956  INFO [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : Starting OrderServiceApplication v0.0.1-SNAPSHOT using Java 17.0.15 with PID 1 (/app/OrderService.jar started by root in /app)
2025-05-18 05:17:28.985 DEBUG [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : Running with Spring Boot v3.4.3, Spring v6.2.3
2025-05-18 05:17:28.988  INFO [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : No active profile set, falling back to 1 default profile: "default"
2025-05-18 05:17:29.121  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Fetching config from server at : http://configserver:8888
2025-05-18 05:17:29.122  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Located environment: name=application, profiles=[default], label=null, version=1acc8d8659fd96ed52844c8881c260bdb5135241, state=
2025-05-18 05:17:29.125  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Fetching config from server at : http://configserver:8888
2025-05-18 05:17:29.128  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Located environment: name=OrderService, profiles=[default], label=null, version=1acc8d8659fd96ed52844c8881c260bdb5135241, state=
2025-05-18 05:17:40.704  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-18 05:17:40.722  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-18 05:17:43.670  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 2872 ms. Found 2 JPA repository interfaces.
2025-05-18 05:17:43.864  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-18 05:17:43.881  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-18 05:17:44.042  INFO [traceId=, spanId=] 1 --- [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface iuh.fit.se.orderservice.repository.OrderDetailRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-05-18 05:17:44.046  INFO [traceId=, spanId=] 1 --- [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface iuh.fit.se.orderservice.repository.OrderRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-05-18 05:17:44.060  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 59 ms. Found 0 Redis repository interfaces.
2025-05-18 05:17:48.475  INFO [traceId=, spanId=] 1 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=f9b4fb59-e3a5-3945-a671-7885d95e7545
2025-05-18 05:17:51.821  INFO [traceId=, spanId=] 1 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 9003 (http)
2025-05-18 05:17:51.862  INFO [traceId=, spanId=] 1 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-18 05:17:51.866  INFO [traceId=, spanId=] 1 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.36]
2025-05-18 05:17:52.041  INFO [traceId=, spanId=] 1 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-18 05:17:52.047  INFO [traceId=, spanId=] 1 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 22913 ms
2025-05-18 05:17:56.746  INFO [traceId=, spanId=] 1 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-18 05:17:57.210  INFO [traceId=, spanId=] 1 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.8.Final
2025-05-18 05:17:57.469  INFO [traceId=, spanId=] 1 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-18 05:17:59.241  INFO [traceId=, spanId=] 1 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-18 05:17:59.446  INFO [traceId=, spanId=] 1 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-18 05:18:01.076  INFO [traceId=, spanId=] 1 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection ConnectionID:1 ClientConnectionId: 0661e4f7-1d31-4944-8f92-55dee92eb9bd
2025-05-18 05:18:01.090  INFO [traceId=, spanId=] 1 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-18 05:18:01.590  WARN [traceId=, spanId=] 1 --- [main] org.hibernate.orm.deprecation            : HHH90000025: SQLServerDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-18 05:18:01.715  INFO [traceId=, spanId=] 1 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-18 05:18:06.254  INFO [traceId=, spanId=] 1 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-18 05:18:07.748  INFO [traceId=, spanId=] 1 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-18 05:18:11.627  WARN [traceId=, spanId=] 1 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-18 05:18:12.814  INFO [traceId=, spanId=] 1 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'InventoryService' URL not provided. Will try picking an instance via load-balancing.
2025-05-18 05:18:14.296  INFO [traceId=, spanId=] 1 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'UserService' URL not provided. Will try picking an instance via load-balancing.
2025-05-18 05:18:26.903  INFO [traceId=, spanId=] 1 --- [main] c.r.stream.impl.StreamEnvironment        : Connecting to localhost with guest user, assuming development environment
2025-05-18 05:18:26.905  INFO [traceId=, spanId=] 1 --- [main] c.r.stream.impl.StreamEnvironment        : Using address resolver to always connect to localhost
2025-05-18 05:18:30.795  INFO [traceId=, spanId=] 1 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2025-05-18 05:18:31.273  WARN [traceId=, spanId=] 1 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-05-18 05:18:31.417  INFO [traceId=, spanId=] 1 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoints beneath base path '/actuator'
2025-05-18 05:18:31.862  INFO [traceId=, spanId=] 1 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2025-05-18 05:18:31.973  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2025-05-18 05:18:31.993  INFO [traceId=, spanId=] 1 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 05:18:32.028  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2025-05-18 05:18:32.030  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2025-05-18 05:18:32.032  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2025-05-18 05:18:32.034  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2025-05-18 05:18:32.036  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2025-05-18 05:18:32.038  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2025-05-18 05:18:32.040  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2025-05-18 05:18:32.817  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2025-05-18 05:18:32.825  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2025-05-18 05:18:32.832  INFO [traceId=, spanId=] 1 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2025-05-18 05:18:32.838  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1747545512837 with initial instances count: 3
2025-05-18 05:18:33.086  INFO [traceId=, spanId=] 1 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application ORDERSERVICE with eureka with status UP
2025-05-18 05:18:33.092  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1747545513092, current=UP, previous=STARTING]
2025-05-18 05:18:33.105  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/05a089deea93:OrderService:9003: registering service...
2025-05-18 05:18:33.149  INFO [traceId=, spanId=] 1 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 9003 (http) with context path '/'
2025-05-18 05:18:33.153  INFO [traceId=, spanId=] 1 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9003
2025-05-18 05:18:33.175  INFO [traceId=, spanId=] 1 --- [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [rabbitmq:5672]
2025-05-18 05:18:33.431  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/05a089deea93:OrderService:9003 - registration status: 204
2025-05-18 05:18:33.910  WARN [traceId=, spanId=] 1 --- [AsyncReporter{ZipkinRestTemplateSender{http://localhost:9411/api/v2/spans}}] z.r.i.AsyncReporter$BoundedAsyncReporter : Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-05-18 05:18:33.914  WARN [traceId=, spanId=] 1 --- [AsyncReporter{ZipkinRestTemplateSender{http://localhost:9411/api/v2/spans}}] z.r.i.AsyncReporter$BoundedAsyncReporter : Dropped 2 spans due to ResourceAccessException(I/O error on POST request for "http://localhost:9411/api/v2/spans": Connect to http://localhost:9411 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused)

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:9411/api/v2/spans": Connect to http://localhost:9411 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:925)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:905)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:840)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:701)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinRestTemplateSender.postSpans(ZipkinRestTemplateSender.java:50)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.apache.hc.client5.http.HttpHostConnectException: Connect to http://localhost:9411 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.apache.hc.client5.http.impl.io.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:216)
	at org.apache.hc.client5.http.impl.io.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:490)
	at org.apache.hc.client5.http.impl.classic.InternalExecRuntime.connectEndpoint(InternalExecRuntime.java:164)
	at org.apache.hc.client5.http.impl.classic.InternalExecRuntime.connectEndpoint(InternalExecRuntime.java:174)
	at org.apache.hc.client5.http.impl.classic.ConnectExec.execute(ConnectExec.java:144)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.ProtocolExec.execute(ProtocolExec.java:192)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.ContentCompressionExec.execute(ContentCompressionExec.java:150)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.HttpRequestRetryExec.execute(HttpRequestRetryExec.java:113)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.RedirectExec.execute(RedirectExec.java:110)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.InternalHttpClient.doExecute(InternalHttpClient.java:174)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:87)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:55)
	at org.apache.hc.client5.http.classic.HttpClient.executeOpen(HttpClient.java:183)
	at org.springframework.http.client.HttpComponentsClientHttpRequest.executeInternal(HttpComponentsClientHttpRequest.java:99)
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71)
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:899)
	... 9 common frames omitted

2025-05-18 05:18:34.005  INFO [traceId=, spanId=] 1 --- [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#680882bd:0/SimpleConnection@6968256e [delegate=amqp://guest@172.19.0.4:5672/, localPort=53156]
2025-05-18 05:18:35.140  INFO [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : Started OrderServiceApplication in 79.613 seconds (process running for 82.754)
2025-05-18 05:18:44.062  INFO [traceId=, spanId=] 1 --- [http-nio-9003-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-18 05:18:44.066  INFO [traceId=, spanId=] 1 --- [http-nio-9003-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-18 05:18:44.080  INFO [traceId=, spanId=] 1 --- [http-nio-9003-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 11 ms
2025-05-18 05:21:45.596  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application ORDERSERVICE with eureka with status DOWN
2025-05-18 05:21:45.601  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1747545705601, current=DOWN, previous=UP]
2025-05-18 05:21:45.607  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/05a089deea93:OrderService:9003: registering service...
2025-05-18 05:21:45.635  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
2025-05-18 05:21:45.646  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/05a089deea93:OrderService:9003 - registration status: 204
2025-05-18 05:21:45.651  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
2025-05-18 05:21:46.040  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
2025-05-18 05:21:46.083  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
2025-05-18 05:21:46.087  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-18 05:21:46.094  INFO [traceId=, spanId=] 1 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-18 05:21:47.224  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-18 05:21:47.230  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-18 05:21:47.235  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-18 05:21:48.075  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2025-05-18 05:21:51.083  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2025-05-18 05:21:51.110  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/05a089deea93:OrderService:9003 - deregister  status: 200
2025-05-18 05:21:51.127  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2025-05-18 05:24:48.320  INFO [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : Starting OrderServiceApplication v0.0.1-SNAPSHOT using Java 17.0.15 with PID 1 (/app/OrderService.jar started by root in /app)
2025-05-18 05:24:48.336 DEBUG [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : Running with Spring Boot v3.4.3, Spring v6.2.3
2025-05-18 05:24:48.338  INFO [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : No active profile set, falling back to 1 default profile: "default"
2025-05-18 05:24:48.430  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Fetching config from server at : http://configserver:8888
2025-05-18 05:24:48.432  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Located environment: name=application, profiles=[default], label=null, version=1acc8d8659fd96ed52844c8881c260bdb5135241, state=
2025-05-18 05:24:48.433  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Fetching config from server at : http://configserver:8888
2025-05-18 05:24:48.434  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Located environment: name=OrderService, profiles=[default], label=null, version=1acc8d8659fd96ed52844c8881c260bdb5135241, state=
2025-05-18 05:24:54.265  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-18 05:24:54.276  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-18 05:24:55.075  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 746 ms. Found 2 JPA repository interfaces.
2025-05-18 05:24:55.151  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-18 05:24:55.161  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-18 05:24:55.241  INFO [traceId=, spanId=] 1 --- [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface iuh.fit.se.orderservice.repository.OrderDetailRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-05-18 05:24:55.246  INFO [traceId=, spanId=] 1 --- [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface iuh.fit.se.orderservice.repository.OrderRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-05-18 05:24:55.249  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 24 ms. Found 0 Redis repository interfaces.
2025-05-18 05:24:57.982  INFO [traceId=, spanId=] 1 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=f9b4fb59-e3a5-3945-a671-7885d95e7545
2025-05-18 05:25:01.378  INFO [traceId=, spanId=] 1 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 9003 (http)
2025-05-18 05:25:01.430  INFO [traceId=, spanId=] 1 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-18 05:25:01.434  INFO [traceId=, spanId=] 1 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.36]
2025-05-18 05:25:01.587  INFO [traceId=, spanId=] 1 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-18 05:25:01.591  INFO [traceId=, spanId=] 1 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 13150 ms
2025-05-18 05:25:05.150  INFO [traceId=, spanId=] 1 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-18 05:25:05.433  INFO [traceId=, spanId=] 1 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.8.Final
2025-05-18 05:25:05.593  INFO [traceId=, spanId=] 1 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-18 05:25:07.102  INFO [traceId=, spanId=] 1 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-18 05:25:07.251  INFO [traceId=, spanId=] 1 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-18 05:25:07.999  INFO [traceId=, spanId=] 1 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection ConnectionID:1 ClientConnectionId: 1a8c8a38-1f16-470a-912c-b9feeb9ab9c2
2025-05-18 05:25:08.011  INFO [traceId=, spanId=] 1 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-18 05:25:08.417  WARN [traceId=, spanId=] 1 --- [main] org.hibernate.orm.deprecation            : HHH90000025: SQLServerDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-18 05:25:08.501  INFO [traceId=, spanId=] 1 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-18 05:25:12.801  INFO [traceId=, spanId=] 1 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-18 05:25:14.241  INFO [traceId=, spanId=] 1 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-18 05:25:17.383  WARN [traceId=, spanId=] 1 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-18 05:25:18.217  INFO [traceId=, spanId=] 1 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'InventoryService' URL not provided. Will try picking an instance via load-balancing.
2025-05-18 05:25:19.244  INFO [traceId=, spanId=] 1 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'UserService' URL not provided. Will try picking an instance via load-balancing.
2025-05-18 05:25:28.184  INFO [traceId=, spanId=] 1 --- [main] c.r.stream.impl.StreamEnvironment        : Connecting to localhost with guest user, assuming development environment
2025-05-18 05:25:28.186  INFO [traceId=, spanId=] 1 --- [main] c.r.stream.impl.StreamEnvironment        : Using address resolver to always connect to localhost
2025-05-18 05:25:31.662  INFO [traceId=, spanId=] 1 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2025-05-18 05:25:32.033  WARN [traceId=, spanId=] 1 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-05-18 05:25:32.140  INFO [traceId=, spanId=] 1 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoints beneath base path '/actuator'
2025-05-18 05:25:32.526  INFO [traceId=, spanId=] 1 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2025-05-18 05:25:32.597  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2025-05-18 05:25:32.609  INFO [traceId=, spanId=] 1 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 05:25:32.649  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2025-05-18 05:25:32.651  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2025-05-18 05:25:32.654  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2025-05-18 05:25:32.656  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2025-05-18 05:25:32.658  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2025-05-18 05:25:32.660  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2025-05-18 05:25:32.662  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2025-05-18 05:25:33.211  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2025-05-18 05:25:33.218  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2025-05-18 05:25:33.226  INFO [traceId=, spanId=] 1 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2025-05-18 05:25:33.232  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1747545933231 with initial instances count: 3
2025-05-18 05:25:33.258  INFO [traceId=, spanId=] 1 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application ORDERSERVICE with eureka with status UP
2025-05-18 05:25:33.261  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1747545933261, current=UP, previous=STARTING]
2025-05-18 05:25:33.266  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/e5e9111ae89d:OrderService:9003: registering service...
2025-05-18 05:25:33.311  INFO [traceId=, spanId=] 1 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 9003 (http) with context path '/'
2025-05-18 05:25:33.315  INFO [traceId=, spanId=] 1 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9003
2025-05-18 05:25:33.332  INFO [traceId=, spanId=] 1 --- [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [rabbitmq:5672]
2025-05-18 05:25:33.441  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/e5e9111ae89d:OrderService:9003 - registration status: 204
2025-05-18 05:25:33.890  INFO [traceId=, spanId=] 1 --- [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#4ef69c53:0/SimpleConnection@247dc925 [delegate=amqp://guest@172.19.0.4:5672/, localPort=50432]
2025-05-18 05:25:34.067  INFO [traceId=, spanId=] 1 --- [http-nio-9003-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-18 05:25:34.070  INFO [traceId=, spanId=] 1 --- [http-nio-9003-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-18 05:25:34.083  INFO [traceId=, spanId=] 1 --- [http-nio-9003-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 9 ms
2025-05-18 05:25:34.273  WARN [traceId=, spanId=] 1 --- [AsyncReporter{ZipkinRestTemplateSender{http://localhost:9411/api/v2/spans}}] z.r.i.AsyncReporter$BoundedAsyncReporter : Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-05-18 05:25:34.277  WARN [traceId=, spanId=] 1 --- [AsyncReporter{ZipkinRestTemplateSender{http://localhost:9411/api/v2/spans}}] z.r.i.AsyncReporter$BoundedAsyncReporter : Dropped 2 spans due to ResourceAccessException(I/O error on POST request for "http://localhost:9411/api/v2/spans": Connect to http://localhost:9411 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused)

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:9411/api/v2/spans": Connect to http://localhost:9411 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:925)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:905)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:840)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:701)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinRestTemplateSender.postSpans(ZipkinRestTemplateSender.java:50)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.apache.hc.client5.http.HttpHostConnectException: Connect to http://localhost:9411 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.apache.hc.client5.http.impl.io.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:216)
	at org.apache.hc.client5.http.impl.io.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:490)
	at org.apache.hc.client5.http.impl.classic.InternalExecRuntime.connectEndpoint(InternalExecRuntime.java:164)
	at org.apache.hc.client5.http.impl.classic.InternalExecRuntime.connectEndpoint(InternalExecRuntime.java:174)
	at org.apache.hc.client5.http.impl.classic.ConnectExec.execute(ConnectExec.java:144)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.ProtocolExec.execute(ProtocolExec.java:192)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.ContentCompressionExec.execute(ContentCompressionExec.java:150)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.HttpRequestRetryExec.execute(HttpRequestRetryExec.java:113)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.RedirectExec.execute(RedirectExec.java:110)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.InternalHttpClient.doExecute(InternalHttpClient.java:174)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:87)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:55)
	at org.apache.hc.client5.http.classic.HttpClient.executeOpen(HttpClient.java:183)
	at org.springframework.http.client.HttpComponentsClientHttpRequest.executeInternal(HttpComponentsClientHttpRequest.java:99)
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71)
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:899)
	... 9 common frames omitted

2025-05-18 05:25:34.497  INFO [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : Started OrderServiceApplication in 57.103 seconds (process running for 61.036)
2025-05-18 05:30:32.650  INFO [traceId=, spanId=] 1 --- [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 05:35:32.632  INFO [traceId=, spanId=] 1 --- [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 05:40:32.619  INFO [traceId=, spanId=] 1 --- [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 05:44:57.108  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application ORDERSERVICE with eureka with status DOWN
2025-05-18 05:44:57.114  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1747547097113, current=DOWN, previous=UP]
2025-05-18 05:44:57.118  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/e5e9111ae89d:OrderService:9003: registering service...
2025-05-18 05:44:57.196  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/e5e9111ae89d:OrderService:9003 - registration status: 204
2025-05-18 05:44:57.358  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
2025-05-18 05:44:57.361  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
2025-05-18 05:44:57.586  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
2025-05-18 05:44:57.604  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
2025-05-18 05:44:57.624  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-18 05:44:57.646  INFO [traceId=, spanId=] 1 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-18 05:44:58.949  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-18 05:44:58.973  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-18 05:44:58.985  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-18 05:44:59.615  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2025-05-18 05:45:02.617  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2025-05-18 05:45:02.631  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/e5e9111ae89d:OrderService:9003 - deregister  status: 200
2025-05-18 05:45:02.633  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2025-05-18 05:47:51.224  INFO [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : Starting OrderServiceApplication v0.0.1-SNAPSHOT using Java 17.0.15 with PID 1 (/app/OrderService.jar started by root in /app)
2025-05-18 05:47:51.286 DEBUG [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : Running with Spring Boot v3.4.3, Spring v6.2.3
2025-05-18 05:47:51.297  INFO [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : No active profile set, falling back to 1 default profile: "default"
2025-05-18 05:47:51.684  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Fetching config from server at : http://configserver:8888
2025-05-18 05:47:51.693  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Located environment: name=application, profiles=[default], label=null, version=1acc8d8659fd96ed52844c8881c260bdb5135241, state=
2025-05-18 05:47:51.697  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Fetching config from server at : http://configserver:8888
2025-05-18 05:47:51.701  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Located environment: name=OrderService, profiles=[default], label=null, version=1acc8d8659fd96ed52844c8881c260bdb5135241, state=
2025-05-18 05:48:02.989  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-18 05:48:03.013  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-18 05:48:04.435  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 1330 ms. Found 2 JPA repository interfaces.
2025-05-18 05:48:04.558  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-18 05:48:04.575  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-18 05:48:04.684  INFO [traceId=, spanId=] 1 --- [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface iuh.fit.se.orderservice.repository.OrderDetailRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-05-18 05:48:04.696  INFO [traceId=, spanId=] 1 --- [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface iuh.fit.se.orderservice.repository.OrderRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-05-18 05:48:04.707  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 55 ms. Found 0 Redis repository interfaces.
2025-05-18 05:48:07.358  INFO [traceId=, spanId=] 1 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=f9b4fb59-e3a5-3945-a671-7885d95e7545
2025-05-18 05:48:12.736  INFO [traceId=, spanId=] 1 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 9003 (http)
2025-05-18 05:48:12.816  INFO [traceId=, spanId=] 1 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-18 05:48:12.819  INFO [traceId=, spanId=] 1 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.36]
2025-05-18 05:48:13.042  INFO [traceId=, spanId=] 1 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-18 05:48:13.046  INFO [traceId=, spanId=] 1 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 21317 ms
2025-05-18 05:48:17.972  INFO [traceId=, spanId=] 1 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-18 05:48:18.423  INFO [traceId=, spanId=] 1 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.8.Final
2025-05-18 05:48:18.655  INFO [traceId=, spanId=] 1 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-18 05:48:20.470  INFO [traceId=, spanId=] 1 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-18 05:48:20.653  INFO [traceId=, spanId=] 1 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-18 05:48:21.332  INFO [traceId=, spanId=] 1 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection ConnectionID:1 ClientConnectionId: b40b3fb5-7c2b-4df2-9330-341ee3088ac4
2025-05-18 05:48:21.340  INFO [traceId=, spanId=] 1 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-18 05:48:21.513  WARN [traceId=, spanId=] 1 --- [main] org.hibernate.orm.deprecation            : HHH90000025: SQLServerDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-18 05:48:21.596  INFO [traceId=, spanId=] 1 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-18 05:48:26.076  INFO [traceId=, spanId=] 1 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-18 05:48:27.045  INFO [traceId=, spanId=] 1 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-18 05:48:31.242  WARN [traceId=, spanId=] 1 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-18 05:48:32.560  INFO [traceId=, spanId=] 1 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'InventoryService' URL not provided. Will try picking an instance via load-balancing.
2025-05-18 05:48:34.360  INFO [traceId=, spanId=] 1 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'UserService' URL not provided. Will try picking an instance via load-balancing.
2025-05-18 05:48:44.506  INFO [traceId=, spanId=] 1 --- [main] c.r.stream.impl.StreamEnvironment        : Connecting to localhost with guest user, assuming development environment
2025-05-18 05:48:44.508  INFO [traceId=, spanId=] 1 --- [main] c.r.stream.impl.StreamEnvironment        : Using address resolver to always connect to localhost
2025-05-18 05:48:47.894  INFO [traceId=, spanId=] 1 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2025-05-18 05:48:48.174  WARN [traceId=, spanId=] 1 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-05-18 05:48:48.275  INFO [traceId=, spanId=] 1 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoints beneath base path '/actuator'
2025-05-18 05:48:48.608  INFO [traceId=, spanId=] 1 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2025-05-18 05:48:48.703  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2025-05-18 05:48:48.721  INFO [traceId=, spanId=] 1 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 05:48:48.754  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2025-05-18 05:48:48.756  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2025-05-18 05:48:48.758  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2025-05-18 05:48:48.760  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2025-05-18 05:48:48.762  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2025-05-18 05:48:48.763  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2025-05-18 05:48:48.765  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2025-05-18 05:48:49.459  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2025-05-18 05:48:49.467  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2025-05-18 05:48:49.473  INFO [traceId=, spanId=] 1 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2025-05-18 05:48:49.478  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1747547329478 with initial instances count: 3
2025-05-18 05:48:49.503  INFO [traceId=, spanId=] 1 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application ORDERSERVICE with eureka with status UP
2025-05-18 05:48:49.506  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1747547329506, current=UP, previous=STARTING]
2025-05-18 05:48:49.512  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/0d60dc3adab3:OrderService:9003: registering service...
2025-05-18 05:48:49.564  INFO [traceId=, spanId=] 1 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 9003 (http) with context path '/'
2025-05-18 05:48:49.567  INFO [traceId=, spanId=] 1 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9003
2025-05-18 05:48:49.583  INFO [traceId=, spanId=] 1 --- [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [rabbitmq:5672]
2025-05-18 05:48:49.631  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/0d60dc3adab3:OrderService:9003 - registration status: 204
2025-05-18 05:48:49.799  INFO [traceId=, spanId=] 1 --- [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#68d93913:0/SimpleConnection@6d7da45f [delegate=amqp://guest@172.19.0.3:5672/, localPort=35276]
2025-05-18 05:48:50.113  INFO [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : Started OrderServiceApplication in 72.592 seconds (process running for 78.462)
2025-05-18 05:48:50.471  WARN [traceId=, spanId=] 1 --- [AsyncReporter{ZipkinRestTemplateSender{http://localhost:9411/api/v2/spans}}] z.r.i.AsyncReporter$BoundedAsyncReporter : Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-05-18 05:48:50.473  WARN [traceId=, spanId=] 1 --- [AsyncReporter{ZipkinRestTemplateSender{http://localhost:9411/api/v2/spans}}] z.r.i.AsyncReporter$BoundedAsyncReporter : Dropped 2 spans due to ResourceAccessException(I/O error on POST request for "http://localhost:9411/api/v2/spans": Connect to http://localhost:9411 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused)

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:9411/api/v2/spans": Connect to http://localhost:9411 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:925)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:905)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:840)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:701)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinRestTemplateSender.postSpans(ZipkinRestTemplateSender.java:50)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.apache.hc.client5.http.HttpHostConnectException: Connect to http://localhost:9411 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.apache.hc.client5.http.impl.io.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:216)
	at org.apache.hc.client5.http.impl.io.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:490)
	at org.apache.hc.client5.http.impl.classic.InternalExecRuntime.connectEndpoint(InternalExecRuntime.java:164)
	at org.apache.hc.client5.http.impl.classic.InternalExecRuntime.connectEndpoint(InternalExecRuntime.java:174)
	at org.apache.hc.client5.http.impl.classic.ConnectExec.execute(ConnectExec.java:144)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.ProtocolExec.execute(ProtocolExec.java:192)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.ContentCompressionExec.execute(ContentCompressionExec.java:150)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.HttpRequestRetryExec.execute(HttpRequestRetryExec.java:113)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.RedirectExec.execute(RedirectExec.java:110)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.InternalHttpClient.doExecute(InternalHttpClient.java:174)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:87)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:55)
	at org.apache.hc.client5.http.classic.HttpClient.executeOpen(HttpClient.java:183)
	at org.springframework.http.client.HttpComponentsClientHttpRequest.executeInternal(HttpComponentsClientHttpRequest.java:99)
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71)
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:899)
	... 9 common frames omitted

2025-05-18 05:49:02.265  INFO [traceId=, spanId=] 1 --- [http-nio-9003-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-18 05:49:02.268  INFO [traceId=, spanId=] 1 --- [http-nio-9003-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-18 05:49:02.277  INFO [traceId=, spanId=] 1 --- [http-nio-9003-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 6 ms
2025-05-18 05:53:48.756  INFO [traceId=, spanId=] 1 --- [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 05:58:48.746  INFO [traceId=, spanId=] 1 --- [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 06:01:43.625  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application ORDERSERVICE with eureka with status DOWN
2025-05-18 06:01:43.634  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1747548103634, current=DOWN, previous=UP]
2025-05-18 06:01:43.640  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/0d60dc3adab3:OrderService:9003: registering service...
2025-05-18 06:01:43.680  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/0d60dc3adab3:OrderService:9003 - registration status: 204
2025-05-18 06:01:43.924  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
2025-05-18 06:01:43.929  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
2025-05-18 06:01:44.172  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
2025-05-18 06:01:44.182  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
2025-05-18 06:01:44.218  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-18 06:01:44.250  INFO [traceId=, spanId=] 1 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-18 06:01:45.874  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-18 06:01:45.956  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-18 06:01:45.985  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-18 06:01:46.752  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2025-05-18 06:01:49.755  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2025-05-18 06:01:49.757  WARN [traceId=, spanId=] 1 --- [DiscoveryClient-%d] c.netflix.discovery.TimedSupervisorTask  : task supervisor shutting down, can't accept the task
2025-05-18 06:01:49.775  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/0d60dc3adab3:OrderService:9003 - deregister  status: 200
2025-05-18 06:01:49.778  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2025-05-18 06:04:45.325  INFO [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : Starting OrderServiceApplication v0.0.1-SNAPSHOT using Java 17.0.15 with PID 1 (/app/OrderService.jar started by root in /app)
2025-05-18 06:04:45.384 DEBUG [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : Running with Spring Boot v3.4.3, Spring v6.2.3
2025-05-18 06:04:45.391  INFO [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : No active profile set, falling back to 1 default profile: "default"
2025-05-18 06:04:46.005  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Fetching config from server at : http://configserver:8888
2025-05-18 06:04:46.029  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Located environment: name=application, profiles=[default], label=null, version=1acc8d8659fd96ed52844c8881c260bdb5135241, state=
2025-05-18 06:04:46.039  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Fetching config from server at : http://configserver:8888
2025-05-18 06:04:46.063  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Located environment: name=OrderService, profiles=[default], label=null, version=1acc8d8659fd96ed52844c8881c260bdb5135241, state=
2025-05-18 06:04:59.846  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-18 06:04:59.905  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-18 06:05:01.769  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 1670 ms. Found 2 JPA repository interfaces.
2025-05-18 06:05:01.917  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-18 06:05:01.931  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-18 06:05:02.042  INFO [traceId=, spanId=] 1 --- [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface iuh.fit.se.orderservice.repository.OrderDetailRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-05-18 06:05:02.046  INFO [traceId=, spanId=] 1 --- [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface iuh.fit.se.orderservice.repository.OrderRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-05-18 06:05:02.053  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 27 ms. Found 0 Redis repository interfaces.
2025-05-18 06:05:05.757  INFO [traceId=, spanId=] 1 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=f9b4fb59-e3a5-3945-a671-7885d95e7545
2025-05-18 06:05:13.701  INFO [traceId=, spanId=] 1 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 9003 (http)
2025-05-18 06:05:13.800  INFO [traceId=, spanId=] 1 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-18 06:05:13.806  INFO [traceId=, spanId=] 1 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.36]
2025-05-18 06:05:14.120  INFO [traceId=, spanId=] 1 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-18 06:05:14.125  INFO [traceId=, spanId=] 1 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 28051 ms
2025-05-18 06:05:19.814  INFO [traceId=, spanId=] 1 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-18 06:05:20.546  INFO [traceId=, spanId=] 1 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.8.Final
2025-05-18 06:05:20.898  INFO [traceId=, spanId=] 1 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-18 06:05:22.611  INFO [traceId=, spanId=] 1 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-18 06:05:22.817  INFO [traceId=, spanId=] 1 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-18 06:05:23.586  INFO [traceId=, spanId=] 1 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection ConnectionID:1 ClientConnectionId: 7f447569-750b-422f-81cc-b6b557bb6bf6
2025-05-18 06:05:23.596  INFO [traceId=, spanId=] 1 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-18 06:05:23.838  WARN [traceId=, spanId=] 1 --- [main] org.hibernate.orm.deprecation            : HHH90000025: SQLServerDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-18 06:05:23.938  INFO [traceId=, spanId=] 1 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-18 06:05:29.342  INFO [traceId=, spanId=] 1 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-18 06:05:30.990  INFO [traceId=, spanId=] 1 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-18 06:05:34.761  WARN [traceId=, spanId=] 1 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-18 06:05:36.303  INFO [traceId=, spanId=] 1 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'InventoryService' URL not provided. Will try picking an instance via load-balancing.
2025-05-18 06:05:37.469  INFO [traceId=, spanId=] 1 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'UserService' URL not provided. Will try picking an instance via load-balancing.
2025-05-18 06:05:56.849  INFO [traceId=, spanId=] 1 --- [main] c.r.stream.impl.StreamEnvironment        : Connecting to localhost with guest user, assuming development environment
2025-05-18 06:05:56.863  INFO [traceId=, spanId=] 1 --- [main] c.r.stream.impl.StreamEnvironment        : Using address resolver to always connect to localhost
2025-05-18 06:06:00.426  INFO [traceId=, spanId=] 1 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2025-05-18 06:06:00.732  WARN [traceId=, spanId=] 1 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-05-18 06:06:00.821  INFO [traceId=, spanId=] 1 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoints beneath base path '/actuator'
2025-05-18 06:06:01.139  INFO [traceId=, spanId=] 1 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2025-05-18 06:06:01.240  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2025-05-18 06:06:01.256  INFO [traceId=, spanId=] 1 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 06:06:01.293  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2025-05-18 06:06:01.295  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2025-05-18 06:06:01.297  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2025-05-18 06:06:01.299  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2025-05-18 06:06:01.301  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2025-05-18 06:06:01.303  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2025-05-18 06:06:01.305  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2025-05-18 06:06:01.846  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2025-05-18 06:06:01.853  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2025-05-18 06:06:01.859  INFO [traceId=, spanId=] 1 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2025-05-18 06:06:01.865  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1747548361864 with initial instances count: 5
2025-05-18 06:06:01.888  INFO [traceId=, spanId=] 1 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application ORDERSERVICE with eureka with status UP
2025-05-18 06:06:01.892  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1747548361891, current=UP, previous=STARTING]
2025-05-18 06:06:01.897  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/cdc4df8cbbb8:OrderService:9003: registering service...
2025-05-18 06:06:01.970  INFO [traceId=, spanId=] 1 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 9003 (http) with context path '/'
2025-05-18 06:06:01.973  INFO [traceId=, spanId=] 1 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9003
2025-05-18 06:06:01.997  INFO [traceId=, spanId=] 1 --- [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [rabbitmq:5672]
2025-05-18 06:06:02.048  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/cdc4df8cbbb8:OrderService:9003 - registration status: 204
2025-05-18 06:06:02.212  INFO [traceId=, spanId=] 1 --- [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#5736cc4e:0/SimpleConnection@48195a26 [delegate=amqp://guest@172.19.0.4:5672/, localPort=36572]
2025-05-18 06:06:02.537  INFO [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : Started OrderServiceApplication in 96.516 seconds (process running for 104.449)
2025-05-18 06:06:02.867  WARN [traceId=, spanId=] 1 --- [AsyncReporter{ZipkinRestTemplateSender{http://localhost:9411/api/v2/spans}}] z.r.i.AsyncReporter$BoundedAsyncReporter : Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-05-18 06:06:02.869  WARN [traceId=, spanId=] 1 --- [AsyncReporter{ZipkinRestTemplateSender{http://localhost:9411/api/v2/spans}}] z.r.i.AsyncReporter$BoundedAsyncReporter : Dropped 2 spans due to ResourceAccessException(I/O error on POST request for "http://localhost:9411/api/v2/spans": Connect to http://localhost:9411 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused)

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:9411/api/v2/spans": Connect to http://localhost:9411 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:925)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:905)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:840)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:701)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinRestTemplateSender.postSpans(ZipkinRestTemplateSender.java:50)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.apache.hc.client5.http.HttpHostConnectException: Connect to http://localhost:9411 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.apache.hc.client5.http.impl.io.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:216)
	at org.apache.hc.client5.http.impl.io.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:490)
	at org.apache.hc.client5.http.impl.classic.InternalExecRuntime.connectEndpoint(InternalExecRuntime.java:164)
	at org.apache.hc.client5.http.impl.classic.InternalExecRuntime.connectEndpoint(InternalExecRuntime.java:174)
	at org.apache.hc.client5.http.impl.classic.ConnectExec.execute(ConnectExec.java:144)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.ProtocolExec.execute(ProtocolExec.java:192)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.ContentCompressionExec.execute(ContentCompressionExec.java:150)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.HttpRequestRetryExec.execute(HttpRequestRetryExec.java:113)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.RedirectExec.execute(RedirectExec.java:110)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.InternalHttpClient.doExecute(InternalHttpClient.java:174)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:87)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:55)
	at org.apache.hc.client5.http.classic.HttpClient.executeOpen(HttpClient.java:183)
	at org.springframework.http.client.HttpComponentsClientHttpRequest.executeInternal(HttpComponentsClientHttpRequest.java:99)
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71)
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:899)
	... 9 common frames omitted

2025-05-18 06:06:19.156  INFO [traceId=, spanId=] 1 --- [http-nio-9003-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-18 06:06:19.159  INFO [traceId=, spanId=] 1 --- [http-nio-9003-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-18 06:06:19.170  INFO [traceId=, spanId=] 1 --- [http-nio-9003-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 9 ms
2025-05-18 06:11:01.289  INFO [traceId=, spanId=] 1 --- [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 06:14:54.042  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application ORDERSERVICE with eureka with status DOWN
2025-05-18 06:14:54.047  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1747548894047, current=DOWN, previous=UP]
2025-05-18 06:14:54.052  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/cdc4df8cbbb8:OrderService:9003: registering service...
2025-05-18 06:14:54.077  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/cdc4df8cbbb8:OrderService:9003 - registration status: 204
2025-05-18 06:14:54.174  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
2025-05-18 06:14:54.178  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
2025-05-18 06:14:54.550  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
2025-05-18 06:14:54.572  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
2025-05-18 06:14:54.580  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-18 06:14:54.593  INFO [traceId=, spanId=] 1 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-18 06:14:55.793  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-18 06:14:55.855  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-18 06:14:55.867  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-18 06:14:56.041  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2025-05-18 06:14:59.042  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2025-05-18 06:14:59.053  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/cdc4df8cbbb8:OrderService:9003 - deregister  status: 200
2025-05-18 06:14:59.055  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2025-05-18 06:18:15.581  INFO [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : Starting OrderServiceApplication v0.0.1-SNAPSHOT using Java 17.0.15 with PID 1 (/app/OrderService.jar started by root in /app)
2025-05-18 06:18:15.780 DEBUG [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : Running with Spring Boot v3.4.3, Spring v6.2.3
2025-05-18 06:18:15.794  INFO [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : No active profile set, falling back to 1 default profile: "default"
2025-05-18 06:18:16.446  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Fetching config from server at : http://configserver:8888
2025-05-18 06:18:16.449  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Located environment: name=application, profiles=[default], label=null, version=1acc8d8659fd96ed52844c8881c260bdb5135241, state=
2025-05-18 06:18:16.452  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Fetching config from server at : http://configserver:8888
2025-05-18 06:18:16.456  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Located environment: name=OrderService, profiles=[default], label=null, version=1acc8d8659fd96ed52844c8881c260bdb5135241, state=
2025-05-18 06:18:28.769  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-18 06:18:28.788  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-18 06:18:30.238  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 1379 ms. Found 2 JPA repository interfaces.
2025-05-18 06:18:30.391  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-18 06:18:30.408  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-18 06:18:30.530  INFO [traceId=, spanId=] 1 --- [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface iuh.fit.se.orderservice.repository.OrderDetailRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-05-18 06:18:30.543  INFO [traceId=, spanId=] 1 --- [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface iuh.fit.se.orderservice.repository.OrderRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-05-18 06:18:30.549  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 63 ms. Found 0 Redis repository interfaces.
2025-05-18 06:18:33.212  INFO [traceId=, spanId=] 1 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=f9b4fb59-e3a5-3945-a671-7885d95e7545
2025-05-18 06:18:37.616  INFO [traceId=, spanId=] 1 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 9003 (http)
2025-05-18 06:18:37.692  INFO [traceId=, spanId=] 1 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-18 06:18:37.696  INFO [traceId=, spanId=] 1 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.36]
2025-05-18 06:18:37.931  INFO [traceId=, spanId=] 1 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-18 06:18:37.934  INFO [traceId=, spanId=] 1 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 21464 ms
2025-05-18 06:18:42.566  INFO [traceId=, spanId=] 1 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-18 06:18:43.275  INFO [traceId=, spanId=] 1 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.8.Final
2025-05-18 06:18:43.452  INFO [traceId=, spanId=] 1 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-18 06:18:45.198  INFO [traceId=, spanId=] 1 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-18 06:18:45.355  INFO [traceId=, spanId=] 1 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-18 06:18:46.049  INFO [traceId=, spanId=] 1 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection ConnectionID:1 ClientConnectionId: b23c0f92-4f7b-4b59-b225-9c75a92c1d80
2025-05-18 06:18:46.062  INFO [traceId=, spanId=] 1 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-18 06:18:46.346  WARN [traceId=, spanId=] 1 --- [main] org.hibernate.orm.deprecation            : HHH90000025: SQLServerDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-18 06:18:46.485  INFO [traceId=, spanId=] 1 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-18 06:18:50.632  INFO [traceId=, spanId=] 1 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-18 06:18:51.645  INFO [traceId=, spanId=] 1 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-18 06:18:55.593  WARN [traceId=, spanId=] 1 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-18 06:18:56.919  INFO [traceId=, spanId=] 1 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'InventoryService' URL not provided. Will try picking an instance via load-balancing.
2025-05-18 06:18:58.384  INFO [traceId=, spanId=] 1 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'UserService' URL not provided. Will try picking an instance via load-balancing.
2025-05-18 06:19:06.915  INFO [traceId=, spanId=] 1 --- [main] c.r.stream.impl.StreamEnvironment        : Connecting to localhost with guest user, assuming development environment
2025-05-18 06:19:06.918  INFO [traceId=, spanId=] 1 --- [main] c.r.stream.impl.StreamEnvironment        : Using address resolver to always connect to localhost
2025-05-18 06:19:11.181  INFO [traceId=, spanId=] 1 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2025-05-18 06:19:11.359  WARN [traceId=, spanId=] 1 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-05-18 06:19:11.425  INFO [traceId=, spanId=] 1 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoints beneath base path '/actuator'
2025-05-18 06:19:11.689  INFO [traceId=, spanId=] 1 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2025-05-18 06:19:11.764  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2025-05-18 06:19:11.776  INFO [traceId=, spanId=] 1 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 06:19:11.801  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2025-05-18 06:19:11.804  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2025-05-18 06:19:11.806  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2025-05-18 06:19:11.807  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2025-05-18 06:19:11.809  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2025-05-18 06:19:11.810  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2025-05-18 06:19:11.812  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2025-05-18 06:19:12.310  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2025-05-18 06:19:12.319  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2025-05-18 06:19:12.327  INFO [traceId=, spanId=] 1 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2025-05-18 06:19:12.332  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1747549152331 with initial instances count: 3
2025-05-18 06:19:12.349  INFO [traceId=, spanId=] 1 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application ORDERSERVICE with eureka with status UP
2025-05-18 06:19:12.352  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1747549152352, current=UP, previous=STARTING]
2025-05-18 06:19:12.359  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/2c6aff93f9e2:OrderService:9003: registering service...
2025-05-18 06:19:12.409  INFO [traceId=, spanId=] 1 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 9003 (http) with context path '/'
2025-05-18 06:19:12.412  INFO [traceId=, spanId=] 1 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9003
2025-05-18 06:19:12.424  INFO [traceId=, spanId=] 1 --- [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [rabbitmq:5672]
2025-05-18 06:19:12.472  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/2c6aff93f9e2:OrderService:9003 - registration status: 204
2025-05-18 06:19:12.600  INFO [traceId=, spanId=] 1 --- [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#727210eb:0/SimpleConnection@2dd5aab4 [delegate=amqp://guest@172.19.0.3:5672/, localPort=55684]
2025-05-18 06:19:12.899  INFO [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : Started OrderServiceApplication in 71.864 seconds (process running for 77.743)
2025-05-18 06:19:13.327  WARN [traceId=, spanId=] 1 --- [AsyncReporter{ZipkinRestTemplateSender{http://localhost:9411/api/v2/spans}}] z.r.i.AsyncReporter$BoundedAsyncReporter : Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-05-18 06:19:13.329  WARN [traceId=, spanId=] 1 --- [AsyncReporter{ZipkinRestTemplateSender{http://localhost:9411/api/v2/spans}}] z.r.i.AsyncReporter$BoundedAsyncReporter : Dropped 2 spans due to ResourceAccessException(I/O error on POST request for "http://localhost:9411/api/v2/spans": Connect to http://localhost:9411 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused)

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:9411/api/v2/spans": Connect to http://localhost:9411 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:925)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:905)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:840)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:701)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinRestTemplateSender.postSpans(ZipkinRestTemplateSender.java:50)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.apache.hc.client5.http.HttpHostConnectException: Connect to http://localhost:9411 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.apache.hc.client5.http.impl.io.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:216)
	at org.apache.hc.client5.http.impl.io.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:490)
	at org.apache.hc.client5.http.impl.classic.InternalExecRuntime.connectEndpoint(InternalExecRuntime.java:164)
	at org.apache.hc.client5.http.impl.classic.InternalExecRuntime.connectEndpoint(InternalExecRuntime.java:174)
	at org.apache.hc.client5.http.impl.classic.ConnectExec.execute(ConnectExec.java:144)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.ProtocolExec.execute(ProtocolExec.java:192)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.ContentCompressionExec.execute(ContentCompressionExec.java:150)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.HttpRequestRetryExec.execute(HttpRequestRetryExec.java:113)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.RedirectExec.execute(RedirectExec.java:110)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.InternalHttpClient.doExecute(InternalHttpClient.java:174)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:87)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:55)
	at org.apache.hc.client5.http.classic.HttpClient.executeOpen(HttpClient.java:183)
	at org.springframework.http.client.HttpComponentsClientHttpRequest.executeInternal(HttpComponentsClientHttpRequest.java:99)
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71)
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:899)
	... 9 common frames omitted

2025-05-18 06:19:25.735  INFO [traceId=, spanId=] 1 --- [http-nio-9003-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-18 06:19:25.738  INFO [traceId=, spanId=] 1 --- [http-nio-9003-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-18 06:19:25.750  INFO [traceId=, spanId=] 1 --- [http-nio-9003-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 10 ms
2025-05-18 06:21:02.812  INFO [traceId=68297c4e94731b9abf21cfae7f92bde6, spanId=bf21cfae7f92bde6] 1 --- [http-nio-9003-exec-5] i.f.s.o.s.w.InventoryServiceWrapper      : 🔍 Checking stock for productVariantDetailId: 05e5a662-a70e-4b41-a3e8-89dc27c1ec13
2025-05-18 06:21:02.994  INFO [traceId=68297c4e94731b9abf21cfae7f92bde6, spanId=bf21cfae7f92bde6] 1 --- [http-nio-9003-exec-5] i.f.s.o.s.w.InventoryServiceWrapper      : 🔍 Checking stock for productVariantDetailId: 05464512-f580-426a-8800-bc7c38683c62
2025-05-18 06:21:03.013  INFO [traceId=68297c4e94731b9abf21cfae7f92bde6, spanId=bf21cfae7f92bde6] 1 --- [http-nio-9003-exec-5] i.f.s.o.service.impl.OrderServiceImpl    : OrderRequestV2(customerId=ba21e63f-c8cc-41c1-aa7c-bde769860887, systemUserId=null, address=79 Tân Thắng, paymentMethod=VNPAY, paymentStatus=WAITING, orderStatus=NEW, productDetailOrders=[OrderRequestV2.ProductDetailOrder(productVariantDetailId=05e5a662-a70e-4b41-a3e8-89dc27c1ec13, quantity=1, price=9090000.0), OrderRequestV2.ProductDetailOrder(productVariantDetailId=05464512-f580-426a-8800-bc7c38683c62, quantity=1, price=7490000.0)])
2025-05-18 06:21:03.314  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.f.s.o.service.impl.OrderServiceImpl    : Received payment response: PaymentStatusResponse(orderId=2c8a6c25-7697-4c70-9c31-b038646e9325, status=WAITING, paymentUrl=https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=1658000000&vnp_Command=pay&vnp_CreateDate=20250518132103&vnp_CurrCode=VND&vnp_ExpireDate=20250518133603&vnp_IpAddr=172.19.0.1&vnp_Locale=vn&vnp_OrderInfo=Order+payment+result%3A2c8a6c25-7697-4c70-9c31-b038646e9325&vnp_OrderType=other&vnp_ReturnUrl=http%3A%2F%2Flocalhost%3A8081%2Fpayment%2Fvn-pay-callback&vnp_TmnCode=2M388J6X&vnp_TxnRef=2c8a6c25-7697-4c70-9c31-b038646e9325&vnp_Version=2.1.0&vnp_SecureHash=d0225f6e647ea445da07b974e8505b5b88055fae3862f2a52e6a81034bab5f181f4af7db0b691e115493e9fc714239d9d39bec20cd63127edc9900aa1c18b8db)
2025-05-18 06:21:03.319  INFO [traceId=68297c4e94731b9abf21cfae7f92bde6, spanId=bf21cfae7f92bde6] 1 --- [http-nio-9003-exec-5] i.f.s.o.s.w.CustomerServiceWrapper       : 🔍 Calling CustomerService for customerId: ba21e63f-c8cc-41c1-aa7c-bde769860887
2025-05-18 06:21:27.711  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] i.f.s.o.service.impl.OrderServiceImpl    : Received payment status for order: 2c8a6c25-7697-4c70-9c31-b038646e9325
2025-05-18 06:21:28.172  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] i.f.s.o.s.w.CustomerServiceWrapper       : 🔍 Calling CustomerService for customerId: ba21e63f-c8cc-41c1-aa7c-bde769860887
2025-05-18 06:21:28.218  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] i.f.s.o.service.impl.OrderServiceImpl    : Payment completed for order: 2c8a6c25-7697-4c70-9c31-b038646e9325
2025-05-18 06:21:28.278  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] i.f.s.o.service.impl.OrderServiceImpl    : Notification sent to ggducvu@gmail.com
2025-05-18 06:24:11.796  INFO [traceId=, spanId=] 1 --- [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 06:29:11.779  INFO [traceId=, spanId=] 1 --- [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 06:34:11.763  INFO [traceId=, spanId=] 1 --- [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 06:39:11.747  INFO [traceId=, spanId=] 1 --- [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 06:43:23.808  INFO [traceId=6829818b85e0e90324571aa5ee29a5cf, spanId=24571aa5ee29a5cf] 1 --- [http-nio-9003-exec-1] i.f.s.o.s.w.InventoryServiceWrapper      : 🔍 Checking stock for productVariantDetailId: 05e5a662-a70e-4b41-a3e8-89dc27c1ec13
2025-05-18 06:43:24.291  INFO [traceId=6829818b85e0e90324571aa5ee29a5cf, spanId=24571aa5ee29a5cf] 1 --- [http-nio-9003-exec-1] i.f.s.o.s.w.InventoryServiceWrapper      : 🔍 Checking stock for productVariantDetailId: 05464512-f580-426a-8800-bc7c38683c62
2025-05-18 06:43:24.319  INFO [traceId=6829818b85e0e90324571aa5ee29a5cf, spanId=24571aa5ee29a5cf] 1 --- [http-nio-9003-exec-1] i.f.s.o.s.w.InventoryServiceWrapper      : 🔍 Checking stock for productVariantDetailId: 1185b857-1df7-40e2-b311-fa39c98d2661
2025-05-18 06:43:24.348  INFO [traceId=6829818b85e0e90324571aa5ee29a5cf, spanId=24571aa5ee29a5cf] 1 --- [http-nio-9003-exec-1] i.f.s.o.service.impl.OrderServiceImpl    : OrderRequestV2(customerId=ba21e63f-c8cc-41c1-aa7c-bde769860887, systemUserId=null, address=791 Tân Thắng, paymentMethod=VNPAY, paymentStatus=WAITING, orderStatus=NEW, productDetailOrders=[OrderRequestV2.ProductDetailOrder(productVariantDetailId=05e5a662-a70e-4b41-a3e8-89dc27c1ec13, quantity=1, price=9090000.0), OrderRequestV2.ProductDetailOrder(productVariantDetailId=05464512-f580-426a-8800-bc7c38683c62, quantity=1, price=7490000.0), OrderRequestV2.ProductDetailOrder(productVariantDetailId=1185b857-1df7-40e2-b311-fa39c98d2661, quantity=1, price=8990000.0)])
2025-05-18 06:43:24.867  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.f.s.o.service.impl.OrderServiceImpl    : Received payment response: PaymentStatusResponse(orderId=bad08899-3e4d-4c0e-97e8-152bc60e47c5, status=WAITING, paymentUrl=https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=2557000000&vnp_Command=pay&vnp_CreateDate=20250518134324&vnp_CurrCode=VND&vnp_ExpireDate=20250518135824&vnp_IpAddr=172.19.0.1&vnp_Locale=vn&vnp_OrderInfo=Order+payment+result%3Abad08899-3e4d-4c0e-97e8-152bc60e47c5&vnp_OrderType=other&vnp_ReturnUrl=http%3A%2F%2Flocalhost%3A8081%2Fpayment%2Fvn-pay-callback&vnp_TmnCode=2M388J6X&vnp_TxnRef=bad08899-3e4d-4c0e-97e8-152bc60e47c5&vnp_Version=2.1.0&vnp_SecureHash=ed44abebf086914228aa0cd91c5bca6427d0e925b302907751fc51f88b5cf235523df27aab48596a9496d2ea4dccc5a61ab70797c1684e210028c5bf508d925c)
2025-05-18 06:43:24.872  INFO [traceId=6829818b85e0e90324571aa5ee29a5cf, spanId=24571aa5ee29a5cf] 1 --- [http-nio-9003-exec-1] i.f.s.o.s.w.CustomerServiceWrapper       : 🔍 Calling CustomerService for customerId: ba21e63f-c8cc-41c1-aa7c-bde769860887
2025-05-18 06:43:46.953  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] i.f.s.o.service.impl.OrderServiceImpl    : Received payment status for order: bad08899-3e4d-4c0e-97e8-152bc60e47c5
2025-05-18 06:43:47.121  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] i.f.s.o.s.w.CustomerServiceWrapper       : 🔍 Calling CustomerService for customerId: ba21e63f-c8cc-41c1-aa7c-bde769860887
2025-05-18 06:43:47.162  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] i.f.s.o.service.impl.OrderServiceImpl    : Payment completed for order: bad08899-3e4d-4c0e-97e8-152bc60e47c5
2025-05-18 06:43:47.202  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] i.f.s.o.service.impl.OrderServiceImpl    : Notification sent to ggducvu@gmail.com
2025-05-18 06:44:11.731  INFO [traceId=, spanId=] 1 --- [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 06:45:54.320  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application ORDERSERVICE with eureka with status DOWN
2025-05-18 06:45:54.327  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1747550754327, current=DOWN, previous=UP]
2025-05-18 06:45:54.331  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/2c6aff93f9e2:OrderService:9003: registering service...
2025-05-18 06:45:54.435  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/2c6aff93f9e2:OrderService:9003 - registration status: 204
2025-05-18 06:45:54.742  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
2025-05-18 06:45:54.745  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
2025-05-18 06:45:54.893  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
2025-05-18 06:45:55.222  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
2025-05-18 06:45:55.273  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-18 06:45:55.320  INFO [traceId=, spanId=] 1 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-18 06:45:56.996  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-18 06:45:57.040  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-18 06:45:57.058  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-18 06:45:58.063  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2025-05-18 06:46:01.065  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2025-05-18 06:46:01.094  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/2c6aff93f9e2:OrderService:9003 - deregister  status: 200
2025-05-18 06:46:01.096  INFO [traceId=, spanId=] 1 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2025-05-18 06:54:18.356  INFO [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : Starting OrderServiceApplication v0.0.1-SNAPSHOT using Java 17.0.15 with PID 1 (/app/OrderService.jar started by root in /app)
2025-05-18 06:54:18.430 DEBUG [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : Running with Spring Boot v3.4.3, Spring v6.2.3
2025-05-18 06:54:18.438  INFO [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : No active profile set, falling back to 1 default profile: "default"
2025-05-18 06:54:18.666  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Fetching config from server at : http://configserver:8888
2025-05-18 06:54:18.669  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Located environment: name=application, profiles=[default], label=null, version=1acc8d8659fd96ed52844c8881c260bdb5135241, state=
2025-05-18 06:54:18.673  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Fetching config from server at : http://configserver:8888
2025-05-18 06:54:18.675  INFO [traceId=, spanId=] 1 --- [main] o.s.c.c.c.ConfigServerConfigDataLoader   : Located environment: name=OrderService, profiles=[default], label=null, version=1acc8d8659fd96ed52844c8881c260bdb5135241, state=
2025-05-18 06:54:28.165  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-18 06:54:28.171  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-18 06:54:28.931  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 725 ms. Found 2 JPA repository interfaces.
2025-05-18 06:54:29.044  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-18 06:54:29.064  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-18 06:54:29.220  INFO [traceId=, spanId=] 1 --- [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface iuh.fit.se.orderservice.repository.OrderDetailRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-05-18 06:54:29.229  INFO [traceId=, spanId=] 1 --- [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface iuh.fit.se.orderservice.repository.OrderRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-05-18 06:54:29.233  INFO [traceId=, spanId=] 1 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 52 ms. Found 0 Redis repository interfaces.
2025-05-18 06:54:32.018  INFO [traceId=, spanId=] 1 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=f9b4fb59-e3a5-3945-a671-7885d95e7545
2025-05-18 06:54:35.865  INFO [traceId=, spanId=] 1 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 9003 (http)
2025-05-18 06:54:35.919  INFO [traceId=, spanId=] 1 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-18 06:54:35.925  INFO [traceId=, spanId=] 1 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.36]
2025-05-18 06:54:36.125  INFO [traceId=, spanId=] 1 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-18 06:54:36.129  INFO [traceId=, spanId=] 1 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 17441 ms
2025-05-18 06:54:40.719  INFO [traceId=, spanId=] 1 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-18 06:54:41.069  INFO [traceId=, spanId=] 1 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.8.Final
2025-05-18 06:54:41.532  INFO [traceId=, spanId=] 1 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-18 06:54:44.286  INFO [traceId=, spanId=] 1 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-18 06:54:44.512  INFO [traceId=, spanId=] 1 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-18 06:54:45.320  INFO [traceId=, spanId=] 1 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection ConnectionID:1 ClientConnectionId: 2388ba3f-edc7-494a-8748-885744fd7de8
2025-05-18 06:54:45.345  INFO [traceId=, spanId=] 1 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-18 06:54:45.649  WARN [traceId=, spanId=] 1 --- [main] org.hibernate.orm.deprecation            : HHH90000025: SQLServerDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-18 06:54:45.777  INFO [traceId=, spanId=] 1 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-18 06:54:50.728  INFO [traceId=, spanId=] 1 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-18 06:54:52.253  INFO [traceId=, spanId=] 1 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-18 06:54:57.635  WARN [traceId=, spanId=] 1 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-18 06:54:59.397  INFO [traceId=, spanId=] 1 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'InventoryService' URL not provided. Will try picking an instance via load-balancing.
2025-05-18 06:55:00.982  INFO [traceId=, spanId=] 1 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'UserService' URL not provided. Will try picking an instance via load-balancing.
2025-05-18 06:55:10.044  INFO [traceId=, spanId=] 1 --- [main] c.r.stream.impl.StreamEnvironment        : Connecting to localhost with guest user, assuming development environment
2025-05-18 06:55:10.048  INFO [traceId=, spanId=] 1 --- [main] c.r.stream.impl.StreamEnvironment        : Using address resolver to always connect to localhost
2025-05-18 06:55:13.696  INFO [traceId=, spanId=] 1 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2025-05-18 06:55:14.060  WARN [traceId=, spanId=] 1 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-05-18 06:55:14.171  INFO [traceId=, spanId=] 1 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoints beneath base path '/actuator'
2025-05-18 06:55:14.547  INFO [traceId=, spanId=] 1 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2025-05-18 06:55:14.662  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2025-05-18 06:55:14.676  INFO [traceId=, spanId=] 1 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 06:55:14.709  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2025-05-18 06:55:14.711  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2025-05-18 06:55:14.713  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2025-05-18 06:55:14.715  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2025-05-18 06:55:14.717  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2025-05-18 06:55:14.719  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2025-05-18 06:55:14.722  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2025-05-18 06:55:15.235  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2025-05-18 06:55:15.241  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2025-05-18 06:55:15.249  INFO [traceId=, spanId=] 1 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2025-05-18 06:55:15.255  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1747551315254 with initial instances count: 3
2025-05-18 06:55:15.287  INFO [traceId=, spanId=] 1 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application ORDERSERVICE with eureka with status UP
2025-05-18 06:55:15.291  INFO [traceId=, spanId=] 1 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1747551315290, current=UP, previous=STARTING]
2025-05-18 06:55:15.299  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/796dd69f5478:OrderService:9003: registering service...
2025-05-18 06:55:15.351  INFO [traceId=, spanId=] 1 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 9003 (http) with context path '/'
2025-05-18 06:55:15.355  INFO [traceId=, spanId=] 1 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9003
2025-05-18 06:55:15.365  INFO [traceId=, spanId=] 1 --- [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [rabbitmq:5672]
2025-05-18 06:55:15.421  INFO [traceId=, spanId=] 1 --- [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDERSERVICE/796dd69f5478:OrderService:9003 - registration status: 204
2025-05-18 06:55:15.640  INFO [traceId=, spanId=] 1 --- [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#6cf4ac81:0/SimpleConnection@16fad858 [delegate=amqp://guest@172.19.0.4:5672/, localPort=38618]
2025-05-18 06:55:16.129  INFO [traceId=, spanId=] 1 --- [main] i.f.s.o.OrderServiceApplication          : Started OrderServiceApplication in 74.079 seconds (process running for 77.089)
2025-05-18 06:55:16.263  WARN [traceId=, spanId=] 1 --- [AsyncReporter{ZipkinRestTemplateSender{http://localhost:9411/api/v2/spans}}] z.r.i.AsyncReporter$BoundedAsyncReporter : Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-05-18 06:55:16.266  WARN [traceId=, spanId=] 1 --- [AsyncReporter{ZipkinRestTemplateSender{http://localhost:9411/api/v2/spans}}] z.r.i.AsyncReporter$BoundedAsyncReporter : Dropped 2 spans due to ResourceAccessException(I/O error on POST request for "http://localhost:9411/api/v2/spans": Connect to http://localhost:9411 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused)

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:9411/api/v2/spans": Connect to http://localhost:9411 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:925)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:905)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:840)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:701)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinRestTemplateSender.postSpans(ZipkinRestTemplateSender.java:50)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.apache.hc.client5.http.HttpHostConnectException: Connect to http://localhost:9411 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.apache.hc.client5.http.impl.io.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:216)
	at org.apache.hc.client5.http.impl.io.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:490)
	at org.apache.hc.client5.http.impl.classic.InternalExecRuntime.connectEndpoint(InternalExecRuntime.java:164)
	at org.apache.hc.client5.http.impl.classic.InternalExecRuntime.connectEndpoint(InternalExecRuntime.java:174)
	at org.apache.hc.client5.http.impl.classic.ConnectExec.execute(ConnectExec.java:144)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.ProtocolExec.execute(ProtocolExec.java:192)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.ContentCompressionExec.execute(ContentCompressionExec.java:150)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.HttpRequestRetryExec.execute(HttpRequestRetryExec.java:113)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.RedirectExec.execute(RedirectExec.java:110)
	at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)
	at org.apache.hc.client5.http.impl.classic.InternalHttpClient.doExecute(InternalHttpClient.java:174)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:87)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:55)
	at org.apache.hc.client5.http.classic.HttpClient.executeOpen(HttpClient.java:183)
	at org.springframework.http.client.HttpComponentsClientHttpRequest.executeInternal(HttpComponentsClientHttpRequest.java:99)
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71)
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:899)
	... 9 common frames omitted

2025-05-18 06:55:29.530  INFO [traceId=, spanId=] 1 --- [http-nio-9003-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-18 06:55:29.533  INFO [traceId=, spanId=] 1 --- [http-nio-9003-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-18 06:55:29.541  INFO [traceId=, spanId=] 1 --- [http-nio-9003-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 7 ms
2025-05-18 07:00:14.707  INFO [traceId=, spanId=] 1 --- [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 07:05:14.688  INFO [traceId=, spanId=] 1 --- [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 07:10:14.672  INFO [traceId=, spanId=] 1 --- [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-05-18 07:13:01.099  INFO [traceId=6829887b537388c7250f79f7dde8064e, spanId=250f79f7dde8064e] 1 --- [http-nio-9003-exec-6] i.f.s.o.s.w.InventoryServiceWrapper      : 🔍 Checking stock for productVariantDetailId: 05e5a662-a70e-4b41-a3e8-89dc27c1ec13
2025-05-18 07:13:04.742  INFO [traceId=6829887b537388c7250f79f7dde8064e, spanId=250f79f7dde8064e] 1 --- [http-nio-9003-exec-6] i.f.s.o.service.impl.OrderServiceImpl    : OrderRequestV2(customerId=ba21e63f-c8cc-41c1-aa7c-bde769860887, systemUserId=null, address=79 Tân Thắng, paymentMethod=VNPAY, paymentStatus=WAITING, orderStatus=NEW, productDetailOrders=[OrderRequestV2.ProductDetailOrder(productVariantDetailId=05e5a662-a70e-4b41-a3e8-89dc27c1ec13, quantity=1, price=9090000.0)])
2025-05-18 07:13:06.607  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.f.s.o.service.impl.OrderServiceImpl    : Received payment response: PaymentStatusResponse(orderId=629683ba-8fb9-49e3-b893-94d1c2438ed3, status=WAITING, paymentUrl=https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=909000000&vnp_Command=pay&vnp_CreateDate=20250518141306&vnp_CurrCode=VND&vnp_ExpireDate=20250518142806&vnp_IpAddr=172.19.0.1&vnp_Locale=vn&vnp_OrderInfo=Order+payment+result%3A629683ba-8fb9-49e3-b893-94d1c2438ed3&vnp_OrderType=other&vnp_ReturnUrl=http%3A%2F%2Flocalhost%3A8081%2Fpayment%2Fvn-pay-callback&vnp_TmnCode=2M388J6X&vnp_TxnRef=629683ba-8fb9-49e3-b893-94d1c2438ed3&vnp_Version=2.1.0&vnp_SecureHash=66ed3855076a24ffb5838c612884e3a1ba8313f4125e491a617ad87290ba7fa242c8b477a0c12509f8323865b675c57be9b6375e6d90ec5e1c3871056a409de2)
2025-05-18 07:13:06.624  INFO [traceId=6829887b537388c7250f79f7dde8064e, spanId=250f79f7dde8064e] 1 --- [http-nio-9003-exec-6] i.f.s.o.s.w.CustomerServiceWrapper       : 🔍 Calling CustomerService for customerId: ba21e63f-c8cc-41c1-aa7c-bde769860887
2025-05-18 07:13:41.197  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] i.f.s.o.service.impl.OrderServiceImpl    : Received payment status for order: 629683ba-8fb9-49e3-b893-94d1c2438ed3
2025-05-18 07:13:42.003  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] i.f.s.o.s.w.CustomerServiceWrapper       : 🔍 Calling CustomerService for customerId: ba21e63f-c8cc-41c1-aa7c-bde769860887
2025-05-18 07:13:42.036  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] i.f.s.o.service.impl.OrderServiceImpl    : Payment completed for order: 629683ba-8fb9-49e3-b893-94d1c2438ed3
2025-05-18 07:13:42.117  INFO [traceId=, spanId=] 1 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] i.f.s.o.service.impl.OrderServiceImpl    : Notification sent to ggducvu@gmail.com
